{"version":3,"sources":["ui/components/dual-color-typography.js","ui/components/half-page-header.js","ui/components/caption.js","ui/components/placeholder.js","logic/with-delay.js","ui/components/linked-button.js","ui/components/centering.js","logic/store.js","logic/store-util.js","logic/active-game.js","ui/components/content.js","ui/components/full-height-wrapper.js","ui/components/full-height-content.js","ui/pages/index-page.js","ui/components/linked-icon-button.js","ui/components/back-bar.js","ui/components/page-title.js","ui/components/map-container.js","logic/use-geolocation.js","logic/dialogs.js","ui/components/quarter-page-header.js","ui/components/checked-textfield.js","logic/hosting.js","ui/components/enter-name-dialog.js","ui/components/section-title.js","ui/pages/host-page.js","ui/pages/join-page.js","ui/components/confirm-dialog.js","logic/use-distance.js","ui/components/tendency.js","ui/components/distance.js","ui/components/large-ripple.js","ui/pages/play-page.js","ui/pages/not-found-page.js","ui/components/alert.js","logic/messages.js","ui/components/state-snackbar.js","ui/components/linked-link.js","ui/pages/share-page.js","ui/pages/about-page.js","version.js","App.js","serviceWorker.js","index.js"],"names":["DualColorTypography","standard","colored","variant","component","Typography","color","useStyles","makeStyles","hugeVerticalPadding","paddingTop","paddingBottom","paddingLeft","paddingRight","textAlign","hugeVerticalPaddingNoHorizontal","HalfPageHeader","children","noHorizontalPadding","classes","Box","className","Caption","margin","style","marginLeft","marginRight","Placeholder","factor","size","marginTop","navigateWithDelay","args","setTimeout","navigate","executeWithDelay","func","LinkedButton","props","Button","onClick","event","preventDefault","href","Centering","reducers","allStoreEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","persistConfig","key","storage","whitelist","store","createStore","persistReducer","s","persistor","persistStore","injectReducer","reducer","replaceReducer","combineReducers","getState","storeKey","subscribe","lastState","makeActionName","name","SET_ACTIVE_GAME","LEAVE_ACTIVE_GAME","state","game","produce","draft","console","log","leaveActiveGame","dispatch","type","payload","useActiveGame","useState","setState","useLayoutEffect","moment","isAfter","Content","FullHeightWrapper","display","flexDirection","height","FullHeightContent","flexGrow","flexShrink","about","marginBottom","IndexPage","useTitle","LinkedIconButton","IconButton","theme","offsetFromTop","offset","mixins","toolbar","morePadding","BackBar","undefined","AppBar","position","elevation","Toolbar","edge","aria-label","ArrowBackRounded","titlePadding","PageTitle","MapContainer","location","coords","latitude","longitude","zoom","setZoom","Map","center","onViewportChanged","viewport","TileLayer","attribution","url","Marker","Popup","width","useGeolocation","setLocation","useEffect","id","navigator","geolocation","watchPosition","clearWatch","SHOW_DIALOG","HIDE_DIALOG","SET_INFO","dialogName","show","info","showDialog","hideDialog","useDialogState","QuarterPageHeader","useCheckedTextfield","maxLength","text","setText","helperText","setHelperText","validate","length","TextField","value","error","onChange","newText","target","GENERATE_LINK","SET_USERNAME","SET_EXPIRES_AT","SET_LAT_LNG","SET_ENABLE_TENDENCY","gameData","expiresAt","lat","lng","assist","tendency","parameter","Base64","encodeURI","JSON","stringify","origin","username","createDate","initialState","EnterNameDialog","onSubmit","onClose","enableTendency","useEnableTendency","placeholder","Dialog","fullScreen","open","DialogContent","FormControlLabel","control","Switch","checked","label","labelPlacement","DialogActions","SectionTitle","HostPage","disabled","add","utc","format","buttonBox","justifyContent","alignItems","JoinPage","gameBase64","parse","decode","e","validHours","diff","isValid","isBefore","setActiveGame","ConfirmDialog","onYes","onNo","exp","b","Math","useDistance","distance","getDistance","frequency","pow","E","alignInLine","verticalAlign","Tendency","KeyboardArrowUpRounded","KeyboardArrowDownRounded","Distance","round","LargeRipple","enable","handleIteration","top","left","bottom","right","animation","onAnimationIteration","buttonWrapper","PlayPage","confirm","useAnimation","setUseAnimation","lastFrequency","setLastFrequency","lastDistance","setLastDistance","setTendency","title","NotFoundPage","Alert","SET","CLEAR","message","scope","global","StateSnackbar","stateName","useAlert","severity","actionName","action","errorMessage","useMessage","latestError","setLatestError","handleClose","reason","clearMessage","alert","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Fragment","fontSize","LinkedLink","Link","container","flexWrap","link","overflowWrap","wordBreak","shareIconBox","SharePage","useLink","share","setMessage","ShareRounded","AboutPage","LinkRounded","createMuiTheme","palette","primary","blue","secondary","green","overrides","MuiButton","root","borderRadius","MuiIconButton","MuiOutlinedInput","input","padding","MuiDialogActions","MuiSnackbarContent","MuiSwitch","switchBase","transform","MuiTextField","fullWidth","disableSpacing","routes","App","routeResult","useRoutes","ThemeProvider","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","setBasepath","process","locale","ReactDOM","render","loading","document","getElementById","URL","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.325a31e0.chunk.js","sourcesContent":["import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst DualColorTypography = ({standard, colored, variant, component}) => {\r\n    return (\r\n        <Typography component={component || \"div\"} variant={variant || \"body1\"}>\r\n            <Typography component=\"span\" variant={variant || \"body1\"}>{standard}</Typography>\r\n            <Typography component=\"span\" color=\"secondary\" variant={variant || \"body1\"}>{colored}</Typography>\r\n        </Typography>\r\n    );\r\n};\r\n\r\nexport default DualColorTypography;","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    hugeVerticalPadding: {\r\n        paddingTop: \"25vh\",\r\n        paddingBottom: \"15vh\",\r\n        paddingLeft: \"1em\",\r\n        paddingRight: \"1em\",\r\n        textAlign: \"center\"\r\n    },\r\n    hugeVerticalPaddingNoHorizontal: {\r\n        paddingTop: \"25vh\",\r\n        paddingBottom: \"15vh\",\r\n        textAlign: \"center\"\r\n    },\r\n}));\r\n\r\nconst HalfPageHeader = ({children, noHorizontalPadding}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box className={noHorizontalPadding ? classes.hugeVerticalPaddingNoHorizontal : classes.hugeVerticalPadding}>\r\n            {children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default HalfPageHeader;","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst Caption = ({children, margin = \"2em\"}) => {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" style={{marginLeft: margin, marginRight: margin}}>{children}</Typography>\r\n    );\r\n};\r\n\r\nexport default Caption;","import React from \"react\";\r\n\r\nconst Placeholder = ({factor = 1}) => {\r\n    const size = 2 * factor;\r\n    return <p style={{marginTop: size + \"em\"}}/>;\r\n};\r\n\r\nexport default Placeholder;","import { navigate } from \"hookrouter\";\r\n\r\nconst WAIT_DELAY = 250;\r\n\r\nexport const navigateWithDelay = (...args) => {\r\n    setTimeout(() => navigate(...args), WAIT_DELAY);\r\n}\r\n\r\nexport const executeWithDelay = (func) => {\r\n    setTimeout(func, WAIT_DELAY);\r\n}\r\n\r\nexport const navigateWithCustomDelay = (delay, ...args) => {\r\n    setTimeout(() => navigate(...args), delay);\r\n};","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {navigateWithDelay} from \"../../logic/with-delay\";\r\n\r\nconst LinkedButton = (props) => {\r\n    return (\r\n        <Button {...props} onClick={event => {\r\n            event.preventDefault();\r\n            navigateWithDelay(props.href);\r\n        }}>\r\n            {props.children}\r\n        </Button>\r\n    );\r\n};\r\n\r\nexport default LinkedButton;","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst Centering = (props) => {\r\n    return (\r\n        <Box {...props} style={{textAlign: \"center\"}}>\r\n            {props.children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default Centering;","import { combineReducers, compose, createStore } from \"redux\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport { persistReducer, persistStore } from \"redux-persist\";\r\n\r\nlet reducers = {};\r\n\r\nconst composeEnhancers = (typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\r\nconst allStoreEnhancers = composeEnhancers(\r\n    //applyMiddleware(thunkMiddleware),\r\n    // (window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\r\n);\r\n\r\nconst persistConfig = {\r\n    key: \"active-game\",\r\n    storage: storage,\r\n    whitelist: [\"active-game\"]\r\n}\r\n\r\nexport const store = createStore(persistReducer(persistConfig, s => s), allStoreEnhancers); // allStoreEnhancers\r\nexport const persistor = persistStore(store);\r\n\r\nstore.injectReducer = (key, reducer) => {\r\n    reducers[key] = reducer;\r\n    store.replaceReducer(persistReducer(persistConfig, combineReducers(reducers)));\r\n};","import { store } from \"./store\";\r\n\r\nexport const getState = (storeKey) => store.getState()[storeKey];\r\n\r\nexport const subscribe = (storeKey, func) => {\r\n    let lastState = getState(storeKey);\r\n    return store.subscribe(() => {\r\n        if (lastState !== getState(storeKey)) {\r\n            lastState = getState(storeKey);\r\n            func(lastState);\r\n        }\r\n    });\r\n};\r\n\r\nexport const makeActionName = (storeKey, name) => `${storeKey}/${name}`;\r\n\r\nexport const setImmediateInterval = (func, interval) => {\r\n    func();\r\n    return setInterval(func, interval);\r\n};","import { getState, makeActionName, subscribe } from \"./store-util\";\r\nimport produce from \"immer\";\r\nimport { store } from \"./store\";\r\nimport { useLayoutEffect, useState } from \"react\";\r\nimport moment from \"moment\";\r\n\r\n/**\r\n * @typedef {Object} Game\r\n * @property {string} name - The host's name\r\n * @property {string} expiresAt - When the game expires, ISO 8601 date string\r\n * @property {number} lat - The host's latitude\r\n * @property {number} lng - The host's longitude\r\n * @property {Object} assist - Assistance flags (e.g. tendency)\r\n */\r\n\r\nconst storeKey = \"active-game\";\r\n\r\n// DEFINITIONS\r\nconst SET_ACTIVE_GAME = makeActionName(storeKey, \"set-active-game\");\r\nconst LEAVE_ACTIVE_GAME = makeActionName(storeKey, \"leave-active-game\");\r\n\r\nconst reducers = {\r\n    [SET_ACTIVE_GAME]: (state, game) => produce(state, draft => {\r\n        console.log(\"set-active-game \" + game);\r\n        return game;\r\n    }),\r\n    [LEAVE_ACTIVE_GAME]: (state) => produce(state, draft => {\r\n        delete draft[\"name\"];\r\n        delete draft[\"expiresAt\"];\r\n        delete draft[\"lat\"];\r\n        delete draft[\"lng\"];\r\n    })\r\n};\r\n\r\n// EXPORTS -- setters\r\nexport const setActiveGame = (game) => {\r\n    store.dispatch({type: SET_ACTIVE_GAME, payload: game});\r\n};\r\n\r\nexport const leaveActiveGame = () => {\r\n    store.dispatch({type: LEAVE_ACTIVE_GAME, payload: {}});\r\n};\r\n\r\nstore.injectReducer(storeKey, (state = {}, {type, payload}) =>\r\n    reducers[type] ? reducers[type](state, payload) : state\r\n);\r\n\r\n// -- hooks\r\n\r\nexport const useActiveGame = () => {\r\n    const [state, setState] = useState(getState(storeKey));\r\n    useLayoutEffect(() => subscribe(storeKey, setState), [setState]);\r\n\r\n    // Leave active game if currentTime > expiredAt\r\n    if (state) {\r\n        if (moment().isAfter(state[\"expiresAt\"])) {\r\n            leaveActiveGame();\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    if (state?.name) {\r\n        return state;\r\n    }\r\n\r\n    return undefined;\r\n};","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst Content = (props) => {\r\n    return (\r\n        <Box {...props} style={{marginLeft: \"24px\", marginRight: \"24px\"}}>\r\n            {props.children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default Content;","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nconst FullHeightWrapper = (props) => {\r\n    return (\r\n        <Box {...props} style={{\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            height: \"100%\"\r\n        }}>\r\n            {props.children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default FullHeightWrapper;","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport Content from \"./content\";\r\n\r\nconst FullHeightContent = (props) => {\r\n    return (\r\n        <Box style={{\r\n            flexGrow: 1,\r\n            flexShrink: 1\r\n        }}>\r\n            <Content {...props}>\r\n                {props.children}\r\n            </Content>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default FullHeightContent;","import React from \"react\";\r\nimport DualColorTypography from \"../components/dual-color-typography\";\r\nimport HalfPageHeader from \"../components/half-page-header\";\r\nimport Caption from \"../components/caption\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport LinkedButton from \"../components/linked-button\";\r\nimport Centering from \"../components/centering\";\r\nimport { useActiveGame } from \"../../logic/active-game\";\r\nimport Content from \"../components/content\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    about: {\r\n        marginBottom: \"8px\"\r\n    }\r\n}));\r\n\r\nconst IndexPage = () => {\r\n    useTitle(\"SightMe\");\r\n    const game = useActiveGame();\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <FullHeightContent>\r\n                <HalfPageHeader noHorizontalPadding>\r\n                    <DualColorTypography variant=\"h2\" component=\"h1\" standard=\"Sight\" colored=\"Me\"/>\r\n                </HalfPageHeader>\r\n                <Centering>\r\n                    <LinkedButton href={\"/host\"}>Spiel erstellen</LinkedButton>\r\n                    <Placeholder/>\r\n\r\n                    {game && (\r\n                        <LinkedButton href={\"/play\"}>{game.name}'s Spiel</LinkedButton>\r\n                    )}\r\n                    {!game && (\r\n                        <Caption margin=\"1em\">Du nimmst aktuell an keinem aktiven Spiel teil. Du erhältst vom Spielleiter einen Link zum Beitreten.</Caption>\r\n                    )}\r\n                </Centering>\r\n            </FullHeightContent>\r\n\r\n            <Content className={classes.about}>\r\n                <Centering>\r\n                    <LinkedButton variant=\"text\" href={\"/about\"}>Über die App</LinkedButton>\r\n                </Centering>\r\n            </Content>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default IndexPage;","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\n\r\nconst LinkedIconButton = (props) => {\r\n    return (\r\n        <IconButton {...props} onClick={event => {\r\n            event.preventDefault();\r\n            navigateWithDelay(props.href);\r\n        }}>\r\n            {props.children}\r\n        </IconButton>\r\n    );\r\n};\r\n\r\nexport default LinkedIconButton;","import React, { Fragment } from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport LinkedIconButton from \"./linked-icon-button\";\r\nimport { ArrowBackRounded } from \"@material-ui/icons\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    offsetFromTop: {\r\n        paddingTop: \"3vh\"\r\n    },\r\n    offset: theme.mixins.toolbar,\r\n    morePadding: {\r\n        paddingLeft: \"20px\",\r\n        paddingRight: \"20px\"\r\n    }\r\n}));\r\n\r\nconst BackBar = ({href, onClick}) => {\r\n    const classes = useStyles();\r\n\r\n    if (href) onClick = undefined;\r\n\r\n    return (\r\n        <Fragment>\r\n            <AppBar position=\"sticky\" className={classes.offsetFromTop} color=\"transparent\" elevation={0}>\r\n                <Toolbar className={classes.morePadding}>\r\n                    {href && (\r\n                        <LinkedIconButton href={href} edge=\"start\" aria-label=\"back\">\r\n                            <ArrowBackRounded/>\r\n                        </LinkedIconButton>\r\n                    )}\r\n                    {onClick && (\r\n                        <IconButton onClick={onClick} edge=\"start\" aria-label=\"back\">\r\n                            <ArrowBackRounded/>\r\n                        </IconButton>\r\n                    )}\r\n                </Toolbar>\r\n            </AppBar>\r\n            {/*<div className={classes.offset}/>*/}\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default BackBar;","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DualColorTypography from \"./dual-color-typography\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    titlePadding: {\r\n        paddingTop: \"0.5em\",\r\n        paddingBottom: \"3em\"\r\n    }\r\n}));\r\n\r\nconst PageTitle = ({standard, colored}) => {\r\n    const classes = useStyles();\r\n    const variant = \"h6\";\r\n\r\n    if (colored) {\r\n        return (\r\n            <Box className={classes.titlePadding}>\r\n                <DualColorTypography variant={variant} component=\"h1\" standard={standard} colored={colored}/>\r\n            </Box>\r\n        );\r\n    } else {\r\n        return (\r\n            <Box className={classes.titlePadding}>\r\n                <Typography variant={variant} component=\"h1\">{standard}</Typography>\r\n            </Box>\r\n        );\r\n    }\r\n};\r\n\r\nexport default PageTitle;","import React, { Fragment, useState } from \"react\";\r\nimport { Map, Marker, Popup, TileLayer } from \"react-leaflet\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"./centering\";\r\n\r\nconst MapContainer = ({location}) => {\r\n    const position = [location?.coords?.latitude, location?.coords?.longitude];\r\n    const [zoom, setZoom] = useState(14);\r\n\r\n    return (\r\n        <Fragment>\r\n            {location && (\r\n                <Map center={position} zoom={zoom} style={{height: \"30vmax\"}} onViewportChanged={viewport => {\r\n                    setZoom(viewport.zoom);\r\n                }}>\r\n                    <TileLayer\r\n                        attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                    />\r\n                    <Marker position={position}>\r\n                        <Popup>Deine Position</Popup>\r\n                    </Marker>\r\n                </Map>\r\n            )}\r\n            {!location && (\r\n                <div style={{width: \"100%\", height: \"30vmax\"}}>\r\n                    <Centering>\r\n                        <Typography variant=\"body2\">GPS-Position ist unbekannt. Bitte erlaube den Standort für diese App</Typography>\r\n                    </Centering>\r\n                </div>\r\n            )}\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default MapContainer;","import { useEffect, useState } from \"react\";\r\n\r\nconst useGeolocation = () => {\r\n    const [location, setLocation] = useState(null);\r\n\r\n    useEffect(() => {\r\n        let id = undefined;\r\n        if (navigator.geolocation) {\r\n            id = navigator.geolocation.watchPosition(position => {\r\n                setLocation(position);\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            if (id) {\r\n                navigator.geolocation.clearWatch(id);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    return location;\r\n};\r\n\r\nexport default useGeolocation;","import { getState, makeActionName, subscribe } from \"./store-util\";\r\nimport produce from \"immer\";\r\nimport { store } from \"./store\";\r\nimport { useLayoutEffect, useState } from \"react\";\r\n\r\nconst storeKey = \"dialogs\";\r\n\r\n// DEFINITIONS\r\nconst SHOW_DIALOG = makeActionName(storeKey, \"show\");\r\nconst HIDE_DIALOG = makeActionName(storeKey, \"hide\");\r\nconst SET_INFO = makeActionName(storeKey, \"setInfo\");\r\n\r\nconst reducers = {\r\n    [SHOW_DIALOG]: (state, dialogName) => produce(state, draft => {\r\n        draft[dialogName] = {...state[dialogName], show: true}\r\n    }),\r\n    [HIDE_DIALOG]: (state, dialogName) => produce(state, draft => {\r\n        draft[dialogName] = {...state[dialogName], show: false}\r\n    }),\r\n\r\n    [SET_INFO]: (state, {dialogName, info}) => produce(state, draft => {\r\n        draft[dialogName] = {...info, show: state[dialogName]?.show}\r\n    })\r\n};\r\n\r\n// EXPORTS -- setters\r\nexport const showDialog = (dialogName) =>\r\n    store.dispatch({type: SHOW_DIALOG, payload: dialogName});\r\n// hideDialog will only be dispatched if the dialog is actually open (in order not to bloat redux timeline)\r\nexport const hideDialog = (dialogName) => {\r\n    if (getState(storeKey)[dialogName]?.show)\r\n        store.dispatch({type: HIDE_DIALOG, payload: dialogName});\r\n};\r\nexport const setDialogInfo = (dialogName, info) =>\r\n    store.dispatch({type: SET_INFO, payload: {dialogName, info}});\r\n\r\nstore.injectReducer(storeKey, (state = {}, {type, payload}) =>\r\n    reducers[type] ? reducers[type](state, payload) : state\r\n);\r\n\r\n// -- hooks\r\n/**\r\n * @param {string} dialogName\r\n * @returns {{show: {boolean}}}\r\n */\r\nexport const useDialogState = (dialogName) => {\r\n    const [state, setState] = useState(getState(storeKey));\r\n    useLayoutEffect(() => subscribe(storeKey, setState), [setState]);\r\n    return state[dialogName];\r\n};","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    hugeVerticalPadding: {\r\n        paddingTop: \"10vh\",\r\n        paddingBottom: \"5vh\",\r\n        paddingLeft: \"1em\",\r\n        paddingRight: \"1em\",\r\n        textAlign: \"center\"\r\n    },\r\n    hugeVerticalPaddingNoHorizontal: {\r\n        paddingTop: \"10vh\",\r\n        paddingBottom: \"5vh\",\r\n        textAlign: \"center\"\r\n    },\r\n}));\r\n\r\nconst QuarterPageHeader = ({children, noHorizontalPadding}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box className={noHorizontalPadding ? classes.hugeVerticalPaddingNoHorizontal : classes.hugeVerticalPadding}>\r\n            {children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default QuarterPageHeader;","import React, { useState } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nconst useCheckedTextfield = (props, maxLength) => {\r\n    const [text, setText] = useState(\"\");\r\n    const [helperText, setHelperText] = useState(\"\");\r\n\r\n    const handleChange = (event) => {\r\n        const newText = event.target.value;\r\n        if (newText.length > maxLength) setHelperText(\"Eingabe ist zu lang!\");\r\n        else setHelperText(\"\");\r\n        setText(newText);\r\n    };\r\n\r\n    const isContentValid = () => {\r\n        if (text.length === 0) setHelperText(\"Eingabe darf nicht leer sein!\");\r\n        return text.length > 0 && text.length <= maxLength;\r\n    };\r\n\r\n    return {\r\n        validate: isContentValid,\r\n        text: text,\r\n        component: <TextField {...props}\r\n                              value={text}\r\n                              error={helperText.length > 0}\r\n                              helperText={helperText}\r\n                              onChange={handleChange}/>,\r\n    };\r\n};\r\n\r\nexport default useCheckedTextfield;","import { getState, makeActionName, subscribe } from \"./store-util\";\r\nimport produce from \"immer\";\r\nimport { store } from \"./store\";\r\nimport { useLayoutEffect, useState } from \"react\";\r\nimport { Base64 } from \"js-base64\";\r\n\r\nconst storeKey = \"hosting\";\r\n\r\n// DEFINITIONS\r\nconst GENERATE_LINK = makeActionName(storeKey, \"generate-link\");\r\nconst SET_USERNAME = makeActionName(storeKey, \"set-username\");\r\nconst SET_EXPIRES_AT = makeActionName(storeKey, \"set-create-date\");\r\nconst SET_LAT_LNG = makeActionName(storeKey, \"set-lat-lng\");\r\nconst SET_ENABLE_TENDENCY = makeActionName(storeKey, \"set-enable-tendency\");\r\n\r\nconst reducers = {\r\n    [GENERATE_LINK]: (state) => produce(state, draft => {\r\n        /** @type {Game} */\r\n        const gameData = {\r\n            name: state[\"name\"],\r\n            expiresAt: state[\"expiresAt\"],\r\n            lat: state[\"latitude\"],\r\n            lng: state[\"longitude\"],\r\n            assist: {\r\n                tendency: state[\"assist-tendency\"]\r\n            }\r\n        };\r\n\r\n        const parameter = Base64.encodeURI(JSON.stringify(gameData));\r\n        draft[\"link\"] = window.origin + \"/sightme/join/\" + parameter;\r\n    }),\r\n\r\n    [SET_USERNAME]: (state, username) => produce(state, draft => {draft[\"name\"] = username}),\r\n    [SET_EXPIRES_AT]: (state, createDate) => produce(state, draft => {draft[\"expiresAt\"] = createDate}),\r\n    [SET_LAT_LNG]: (state, {lat, lng}) => produce(state, draft => {\r\n        draft[\"latitude\"] = lat;\r\n        draft[\"longitude\"] = lng;\r\n    }),\r\n    [SET_ENABLE_TENDENCY]: (state, tendency) => produce(state, draft => {draft[\"assist-tendency\"] = tendency})\r\n};\r\n\r\n// EXPORTS -- setters\r\nexport const generateLink = () =>\r\n    store.dispatch({type: GENERATE_LINK, payload: {}});\r\n\r\nexport const setUsername = (username) =>\r\n    store.dispatch({type: SET_USERNAME, payload: username});\r\n\r\nexport const setExpiresAt = (createDate) =>\r\n    store.dispatch({type: SET_EXPIRES_AT, payload: createDate});\r\n\r\nexport const setLatLng = (lat, lng) =>\r\n    store.dispatch({type: SET_LAT_LNG, payload: {lat, lng}});\r\n\r\nexport const setEnableTendency = (tendency) =>\r\n    store.dispatch({type: SET_ENABLE_TENDENCY, payload: tendency});\r\n\r\n// const initialState = {\r\n//     latitude: 53.3037056,\r\n//     longitude: 10.544742399999999,\r\n//     expiresAt: '2020-07-04T22:53:20Z',\r\n//     name: 'Lennart',\r\n//     link: 'http://localhost:3000/sightme/join/eyJuYW1lIjoiTGVubmFydCIsImV4cGlyZXNBdCI6IjIwMjAtMDctMDRUMjI6NTM6MjBaIiwibGF0Ijo1My4zMDM3MDU2LCJsbmciOjEwLjU0NDc0MjM5OTk5OTk5OX0'\r\n// };\r\n\r\nconst initialState = {\r\n    // latitude: 53.3037056,\r\n    // longitude: 10.544742399999999,\r\n    // expiresAt: '2020-07-04T22:53:20Z',\r\n    // name: 'Lennart',\r\n    // link: 'http://localhost:3000/sightme/join/eyJuYW1lIjoiTGVubmFydCIsImV4cGlyZXNBdCI6IjIwMjAtMDctMDRUMjI6NTM6MjBaIiwibGF0Ijo1My4zMDM3MDU2LCJsbmciOjEwLjU0NDc0MjM5OTk5OTk5OX0',\r\n    \"assist-tendency\": true\r\n};\r\n\r\nstore.injectReducer(storeKey, (state = initialState, {type, payload}) =>\r\n    reducers[type] ? reducers[type](state, payload) : state\r\n);\r\n\r\n// -- hooks\r\nexport const useLink = () => {\r\n    const [state, setState] = useState(getState(storeKey));\r\n    useLayoutEffect(() => subscribe(storeKey, setState), [setState]);\r\n    return state[\"link\"];\r\n};\r\n\r\nexport const useEnableTendency = () => {\r\n    const [state, setState] = useState(getState(storeKey));\r\n    useLayoutEffect(() => subscribe(storeKey, setState), [setState]);\r\n    return state[\"assist-tendency\"];\r\n};","import React from \"react\";\r\nimport { useDialogState } from \"../../logic/dialogs\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport BackBar from \"./back-bar\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Caption from \"./caption\";\r\nimport QuarterPageHeader from \"./quarter-page-header\";\r\nimport Centering from \"./centering\";\r\nimport Placeholder from \"./placeholder\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport useCheckedTextfield from \"./checked-textfield\";\r\nimport { setEnableTendency, setUsername, useEnableTendency } from \"../../logic/hosting\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\n\r\nexport const ENTER_NAME_DIALOG = \"enter-name-dialog\";\r\n\r\nconst EnterNameDialog = ({onSubmit, onClose}) => {\r\n    const state = useDialogState(ENTER_NAME_DIALOG);\r\n    const enableTendency = useEnableTendency();\r\n    const {validate, text, component} = useCheckedTextfield({placeholder: \"Dein Name\"}, 20);\r\n\r\n    return (\r\n        <Dialog fullScreen={true} open={state?.show || false} onClose={onClose}>\r\n            <BackBar onClick={onClose}/>\r\n            <DialogContent>\r\n                <QuarterPageHeader noHorizontalPadding>\r\n                    <Typography variant=\"h4\" component=\"h1\">Bitte gib deinen Namen ein.</Typography>\r\n                </QuarterPageHeader>\r\n                <Centering>\r\n                    <Caption>Damit wissen die Teilnehmer, dass sie wirklich deinem Spiel beitreten.</Caption>\r\n                    <Placeholder/>\r\n                    {component}\r\n                    <Placeholder/>\r\n                    <FormControlLabel\r\n                        control={<Switch checked={enableTendency} onChange={event => setEnableTendency(event.target.checked)}/>}\r\n                        label=\"Richtungs-Tendenz anzeigen\"\r\n                        labelPlacement=\"start\"/>\r\n                </Centering>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={() => {\r\n                    if (validate()) {\r\n                        setUsername(text);\r\n                        onSubmit();\r\n                    }\r\n                }}>Spiel erstellen</Button>\r\n                <Button variant=\"text\" color=\"inherit\" onClick={onClose}>Abbrechen</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default EnterNameDialog;","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DualColorTypography from \"./dual-color-typography\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    titlePadding: {\r\n        paddingTop: \"0.5em\",\r\n        paddingBottom: \"0.5em\"\r\n    }\r\n}));\r\n\r\nconst SectionTitle = ({standard, colored}) => {\r\n    const classes = useStyles();\r\n    const variant = \"subtitle2\";\r\n\r\n    if (colored) {\r\n        return (\r\n            <Box className={classes.titlePadding}>\r\n                <DualColorTypography variant={variant} component=\"h1\" standard={standard} colored={colored}/>\r\n            </Box>\r\n        );\r\n    } else {\r\n        return (\r\n            <Box className={classes.titlePadding}>\r\n                <Typography variant={variant} component=\"h1\">{standard}</Typography>\r\n            </Box>\r\n        );\r\n    }\r\n};\r\n\r\nexport default SectionTitle;","import React, { Fragment } from \"react\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport Content from \"../components/content\";\r\nimport PageTitle from \"../components/page-title\";\r\nimport MapContainer from \"../components/map-container\";\r\nimport useGeolocation from \"../../logic/use-geolocation\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport Centering from \"../components/centering\";\r\nimport Caption from \"../components/caption\";\r\nimport { hideDialog, showDialog } from \"../../logic/dialogs\";\r\nimport EnterNameDialog, { ENTER_NAME_DIALOG } from \"../components/enter-name-dialog\";\r\nimport { executeWithDelay } from \"../../logic/with-delay\";\r\nimport { generateLink, setExpiresAt, setLatLng } from \"../../logic/hosting\";\r\nimport moment from \"moment\";\r\nimport SectionTitle from \"../components/section-title\";\r\nimport { navigate, useTitle } from \"hookrouter\";\r\n\r\nconst HostPage = () => {\r\n    useTitle(\"Spiel hosten | SightMe\");\r\n    const location = useGeolocation();\r\n\r\n    // Dialog-Methods\r\n    const handleClose = () => executeWithDelay(() => hideDialog(ENTER_NAME_DIALOG));\r\n    const handleSubmit = () => {\r\n        generateLink();\r\n        executeWithDelay(() => {\r\n            hideDialog(ENTER_NAME_DIALOG);\r\n            navigate(\"/share\", true);\r\n        });\r\n    };\r\n\r\n    // Create button handler --> opens dialog\r\n    const handleClickCreate = () => {\r\n        setLatLng(location.coords.latitude, location.coords.longitude);\r\n        setExpiresAt(moment().add(1, 'days').utc().format());\r\n        executeWithDelay(() => showDialog(ENTER_NAME_DIALOG));\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <BackBar href={\"/\"}/>\r\n            <Content>\r\n                <PageTitle standard=\"Ein Spiel hosten\"/>\r\n\r\n                {/* Map-Section with Title and Map */}\r\n                <SectionTitle standard=\"Dein Standort\"/>\r\n                <MapContainer location={location}/>\r\n                <Placeholder/>\r\n\r\n                {/* Create-Button or location permission message */}\r\n                <Centering>\r\n                    <Button disabled={!location} onClick={handleClickCreate}>Spiel hier erstellen</Button>\r\n                    {!location && (\r\n                        <Fragment>\r\n                            <Placeholder/>\r\n                            <Caption>Bitte erlaube den Standort für diese App</Caption>\r\n                        </Fragment>\r\n                    )}\r\n                </Centering>\r\n            </Content>\r\n\r\n            {/* The \"enter name\"-dialog with references to corresponding action handler methods */}\r\n            <EnterNameDialog onSubmit={handleSubmit} onClose={handleClose}/>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default HostPage;","import React, { Fragment } from \"react\";\r\nimport { Base64 } from \"js-base64\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport Content from \"../components/content\";\r\nimport PageTitle from \"../components/page-title\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport moment from \"moment\";\r\nimport Centering from \"../components/centering\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport LinkedButton from \"../components/linked-button\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { setActiveGame } from \"../../logic/active-game\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    buttonBox: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        marginBottom: \"8px\",\r\n    }\r\n}));\r\n\r\nconst JoinPage = ({gameBase64}) => {\r\n    const classes = useStyles();\r\n\r\n    let game = undefined;\r\n    try {\r\n        game = JSON.parse(Base64.decode(gameBase64));\r\n    } catch (e) {}\r\n\r\n    useTitle(`${game?.name} beitreten | SightMe`);\r\n\r\n    const validHours = moment(game?.expiresAt).diff(moment(), 'hours');\r\n    const isValid = moment().isBefore(moment(game?.expiresAt));\r\n\r\n    const handleClickJoin = () => {\r\n        setActiveGame(game);\r\n        navigateWithDelay(\"/play\");\r\n    };\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <BackBar href={\"/\"}/>\r\n            <FullHeightContent>\r\n                <PageTitle standard=\"Einem Spiel beitreten\"/>\r\n                <Placeholder factor={2}/>\r\n\r\n                <Centering>\r\n                    {game && (\r\n                        <Fragment>\r\n                            <Typography variant=\"h4\">Host: {game?.name}</Typography><br/>\r\n                            {isValid && (\r\n                                <Typography variant=\"body1\">gültig für die nächsten {validHours} Stunde(n)</Typography>\r\n                            )}\r\n                            {!isValid && (\r\n                                <Typography variant=\"body1\">Das Spiel ist bereit abgelaufen, du kannst ihm nicht mehr beitreten.</Typography>\r\n                            )}\r\n                        </Fragment>\r\n                    )}\r\n                    {!game && (\r\n                        <Typography variant=\"h5\">Im Link befindet sich kein gültiges Spiel. Bitte deinen Spielleiter, dir den Link noch einmal zu schicken.</Typography>\r\n                    )}\r\n                </Centering>\r\n            </FullHeightContent>\r\n\r\n            <Content className={classes.buttonBox}>\r\n                <Button onClick={handleClickJoin} disabled={!game || !isValid}>Spiel beitreten</Button>\r\n                <LinkedButton href={\"/\"} variant=\"text\" color=\"inherit\" style={{marginTop: \"6px\"}}>Abbrechen</LinkedButton>\r\n            </Content>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default JoinPage;","import React from \"react\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"./centering\";\r\n\r\nconst ConfirmDialog = ({open, text, onYes, onNo}) => {\r\n    return (\r\n        <Dialog open={open} onClose={onNo}>\r\n            <DialogContent>\r\n                <Centering>\r\n                    <Typography variant=\"body1\">{text}</Typography>\r\n                </Centering>\r\n            </DialogContent>\r\n            <DialogActions style={{flexDirection: \"row\", justifyContent: \"center\", alignItems: \"baseline\", paddingBottom: \"16px\"}}>\r\n                <Button variant=\"text\" color=\"inherit\" onClick={onNo}>Nein</Button>\r\n                <Button onClick={onYes}>Ja</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default ConfirmDialog;\r\n\r\n","import useGeolocation from \"./use-geolocation\";\r\nimport getDistance from \"geolib/es/getDistance\";\r\nimport { useActiveGame } from \"./active-game\";\r\n\r\nconst exp = {\r\n    fmin: 0.15,\r\n    fmax: 5,\r\n    d: 4000\r\n};\r\n\r\nconst b = (Math.log(exp.fmin / exp.fmax)) / exp.d;\r\n\r\nconst useDistance = () => {\r\n    const location = useGeolocation();\r\n    const game = useActiveGame();\r\n\r\n    if (location && game) {\r\n        const distance = getDistance(\r\n            {latitude: location.coords.latitude, longitude: location.coords.longitude},\r\n            {latitude: game.lat, longitude: game.lng},\r\n            1\r\n        );\r\n\r\n        const frequency = exp.fmax * Math.pow(Math.E, b * distance);\r\n\r\n        return {distance, frequency};\r\n    } else {\r\n        return {distance: -1, frequency: -1};\r\n    }\r\n};\r\n\r\nexport default useDistance;","import React from \"react\";\r\nimport { KeyboardArrowDownRounded, KeyboardArrowUpRounded } from \"@material-ui/icons\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    alignInLine: {\r\n        verticalAlign: \"middle\"\r\n    }\r\n}));\r\n\r\nconst Tendency = ({game, tendency}) => {\r\n    const classes = useStyles();\r\n\r\n    if (game?.assist?.tendency) {\r\n        if (tendency === 'up') {\r\n            return <KeyboardArrowUpRounded className={classes.alignInLine}/>;\r\n        } else if (tendency === 'down') {\r\n            return <KeyboardArrowDownRounded className={classes.alignInLine}/>;\r\n        }\r\n    }\r\n\r\n    return \"\";\r\n}\r\n\r\nexport default Tendency;","const Distance = ({distance}) => {\r\n    return distance < 50\r\n        ? \"< 50 m \"\r\n        : (\r\n            distance < 500\r\n                ? \"< 500 m\"\r\n                : \"~ \" + (Math.round(distance * 0.002) * 0.5) + \" km\"\r\n        );\r\n};\r\n\r\nexport default Distance;","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nconst LargeRipple = ({enable, frequency, handleIteration}) => {\r\n    return (\r\n        <Box style={{\r\n            width: \"100%\",\r\n            paddingTop: \"100%\",\r\n            position: \"relative\",\r\n        }}>\r\n            <Box style={{\r\n                position: \"absolute\",\r\n                top: 0, left: 0, bottom: 0, right: 0,\r\n                animation: enable ? `ripple ${(1 / frequency)}s ease-out infinite` : \"none\"\r\n            }}\r\n                 className=\"ripple\"\r\n                 onAnimationIteration={handleIteration}/>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default LargeRipple;","import React, { Fragment, useLayoutEffect, useState } from \"react\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport Content from \"../components/content\";\r\nimport PageTitle from \"../components/page-title\";\r\nimport { leaveActiveGame, useActiveGame } from \"../../logic/active-game\";\r\nimport { navigate, useTitle } from \"hookrouter\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Centering from \"../components/centering\";\r\nimport { executeWithDelay } from \"../../logic/with-delay\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ConfirmDialog from \"../components/confirm-dialog\";\r\nimport { hideDialog, showDialog, useDialogState } from \"../../logic/dialogs\";\r\nimport useDistance from \"../../logic/use-distance\";\r\nimport Tendency from \"../components/tendency\";\r\nimport Distance from \"../components/distance\";\r\nimport LargeRipple from \"../components/large-ripple\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    buttonWrapper: {\r\n        position: \"fixed\",\r\n        bottom: 0,\r\n        width: \"100%\",\r\n        marginBottom: \"24px\"\r\n    },\r\n}));\r\n\r\nconst CONFIRM_LEAVE_DIALOG = \"confirm-leave-dialog\";\r\n\r\nconst PlayPage = () => {\r\n    const game = useActiveGame();\r\n    const {distance, frequency} = useDistance();\r\n    const classes = useStyles();\r\n    const confirm = useDialogState(CONFIRM_LEAVE_DIALOG);\r\n\r\n    useTitle(`Finde ${game?.name} | SightMe`);\r\n\r\n    const [useAnimation, setUseAnimation] = useState(true);\r\n    const [lastFrequency, setLastFrequency] = useState(0.8);\r\n    const [lastDistance, setLastDistance] = useState(2500);\r\n    const [tendency, setTendency] = useState(null);\r\n\r\n    if (lastDistance !== distance) {\r\n        setTendency(distance < lastDistance ? 'up' : 'down');\r\n        setLastDistance(distance);\r\n    }\r\n\r\n    const handleIteration = () => {\r\n        if (lastFrequency !== frequency) {\r\n            setLastFrequency(frequency);\r\n            setUseAnimation(false);\r\n            setTimeout(() => {\r\n                setUseAnimation(true);\r\n            }, 10);\r\n        }\r\n    };\r\n\r\n    const handleLeave = () => {\r\n        leaveActiveGame();\r\n        navigate(\"/\");\r\n    };\r\n\r\n    useLayoutEffect(() => {\r\n        return () => {\r\n            hideDialog(CONFIRM_LEAVE_DIALOG);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <Fragment>\r\n            <BackBar href={\"/\"}/>\r\n            {game && (\r\n                <Fragment>\r\n                    <Content>\r\n                        <PageTitle standard=\"Finde \" colored={game.name}/>\r\n                        <Placeholder/>\r\n\r\n                        <Centering>\r\n                            <LargeRipple enable={useAnimation} frequency={lastFrequency} handleIteration={handleIteration}/>\r\n                            <Placeholder/>\r\n                            <Typography variant=\"body1\">Distanz <Distance distance={lastDistance}/> <Tendency game={game} tendency={tendency}/></Typography>\r\n                        </Centering>\r\n                    </Content>\r\n\r\n                    <Placeholder factor={3}/>\r\n\r\n                    <Centering className={classes.buttonWrapper}>\r\n                        <Button onClick={() => executeWithDelay(() => showDialog(CONFIRM_LEAVE_DIALOG))}>Spiel verlassen</Button>\r\n                    </Centering>\r\n\r\n                    <ConfirmDialog open={confirm?.show || false}\r\n                                   title=\"Spiel verlassen\"\r\n                                   text=\"Möchtest du das Spiel wirklich verlassen?\"\r\n                                   onNo={() => hideDialog(CONFIRM_LEAVE_DIALOG)}\r\n                                   onYes={handleLeave}/>\r\n                </Fragment>\r\n            )}\r\n            {!game && (\r\n                <Content>\r\n                    <PageTitle standard=\"Finde \" colored=\"???\"/>\r\n                    <Placeholder factor={2}/>\r\n                    <Centering>\r\n                        <Typography variant=\"h5\">Es wurde kein aktives Spiel gefunden. Bitte trete erst einem Spiel bei.</Typography>\r\n                    </Centering>\r\n                </Content>\r\n            )}\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default PlayPage;","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Content from \"../components/content\";\r\nimport Centering from \"../components/centering\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst NotFoundPage = () => {\r\n    useTitle(\"Nicht gefunden | SightMe\");\r\n\r\n    return (\r\n        <Content>\r\n            <Centering>\r\n                <Typography variant=\"body1\">Seite nicht gefunden :/</Typography>\r\n            </Centering>\r\n        </Content>\r\n    );\r\n};\r\n\r\nexport default NotFoundPage;","import React from \"react\";\r\nimport MuiAlert from \"@material-ui/lab/Alert\";\r\n\r\nexport function Alert(props) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}","import { getState, makeActionName, subscribe } from \"./store-util\";\r\nimport { store } from \"./store\";\r\nimport produce from \"immer\";\r\nimport { useLayoutEffect, useState } from \"react\";\r\n\r\nconst storeKey = \"message\";\r\nconst DEFAULT_SCOPE = \"global\";\r\n\r\n// DEFINITIONS\r\nconst SET = makeActionName(storeKey, \"set\");\r\nconst CLEAR = makeActionName(storeKey, \"clear\");\r\n\r\nconst reducers = {\r\n    [SET]: (state, {message, scope}) => produce(state, draft => {draft[scope] = message;}),\r\n    [CLEAR]: (state, scope) => produce(state, draft => {draft[scope] = null;})\r\n}\r\n\r\nconst initialState = {\r\n    global: null\r\n};\r\n\r\n// EXPORTS -- setters\r\nexport const setMessage = (message, scope = DEFAULT_SCOPE) =>\r\n    store.dispatch({type: SET, payload: {message, scope}});\r\n\r\nexport const clearMessage = (scope = DEFAULT_SCOPE) =>\r\n    store.dispatch({type: CLEAR, payload: scope});\r\n\r\nstore.injectReducer(storeKey, (state = initialState, {type, payload}) =>\r\n    reducers[type] ? reducers[type](state, payload) : state\r\n);\r\n\r\n// -- hooks\r\nexport const useMessage = (scope = DEFAULT_SCOPE) => {\r\n    const [state, setState] = useState(getState(storeKey));\r\n    useLayoutEffect(() => subscribe(storeKey, setState), [setState]);\r\n    return state[scope];\r\n};","import React, { useLayoutEffect, useState } from \"react\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { Alert } from \"./alert\";\r\nimport { clearMessage, useMessage } from \"../../logic/messages\";\r\n\r\n/**\r\n * Use can either use useAlert = true with severity OR action with actionName\r\n */\r\nconst StateSnackbar = ({stateName, useAlert = true, severity = \"error\", actionName = \"Rückgängig\", action = null}) => {\r\n    const errorMessage = useMessage(stateName);\r\n\r\n    const error = errorMessage;\r\n    const open = !!errorMessage;\r\n    const [latestError, setLatestError] = useState(\"\");\r\n\r\n    const handleClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n        if (open) {\r\n            clearMessage(stateName);\r\n        }\r\n    };\r\n\r\n    let alert = null;\r\n    if (useAlert) {\r\n        alert = (\r\n            <Alert severity={severity} onClose={handleClose}>\r\n                {latestError}\r\n            </Alert>\r\n        );\r\n    }\r\n\r\n    useLayoutEffect(() => {\r\n        if (error) {\r\n            setLatestError(error);\r\n        }\r\n    }, [error]);\r\n\r\n    return (\r\n        <Snackbar\r\n            anchorOrigin={{\r\n                vertical: 'bottom',\r\n                horizontal: 'left',\r\n            }}\r\n            open={open}\r\n            autoHideDuration={6000}\r\n            // action={action && <Button onClick={action} size=\"small\" color=\"secondary\">{actionName}</Button>}\r\n            message={!useAlert && latestError}\r\n            onClose={handleClose}\r\n            action={!useAlert && (\r\n                <React.Fragment>\r\n                    {action && (\r\n                        <Button color=\"secondary\" size=\"small\" onClick={action}>\r\n                            {actionName}\r\n                        </Button>\r\n                    )}\r\n                    <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n                        <CloseIcon fontSize=\"small\"/>\r\n                    </IconButton>\r\n                </React.Fragment>\r\n            )}>\r\n            {alert}\r\n        </Snackbar>\r\n    );\r\n};\r\n\r\nexport default StateSnackbar;","import React from \"react\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\n\r\nconst LinkedLink = (props) => {\r\n    return <Link {...props} onClick={event => {\r\n        event.preventDefault();\r\n        navigateWithDelay(props.href);\r\n    }}/>;\r\n};\r\n\r\nexport default LinkedLink;","import React, { Fragment } from \"react\";\r\nimport { useLink } from \"../../logic/hosting\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport Content from \"../components/content\";\r\nimport QuarterPageHeader from \"../components/quarter-page-header\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"../components/centering\";\r\nimport Caption from \"../components/caption\";\r\nimport SectionTitle from \"../components/section-title\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport LinkedLink from \"../components/linked-link\";\r\nimport { ShareRounded } from \"@material-ui/icons\";\r\nimport { setMessage } from \"../../logic/messages\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    container: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        flexWrap: \"nowrap\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"flex-start\",\r\n    },\r\n    link: {\r\n        overflowWrap: \"anywhere\",\r\n        wordBreak: \"break-all\",\r\n        flexGrow: 1\r\n    },\r\n    shareIconBox: {\r\n        margin: \"0px 16px\"\r\n    }\r\n}));\r\n\r\nconst SharePage = () => {\r\n    useTitle(\"Link zum Spiel teilen | SightMe\");\r\n    const classes = useStyles();\r\n    const link = useLink();\r\n\r\n    // Share button handler\r\n    const handleClickShare = () => {\r\n        if (navigator.share) {\r\n            navigator.share({\r\n                url: link\r\n            });\r\n        } else {\r\n            setMessage(\"Dein Browser unterstützt das Teilen von Links nicht. Bitte kopiere den Link und verschicke ihn manuell.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <BackBar href={\"/\"}/>\r\n            <Content>\r\n                {link && (\r\n                    <Fragment>\r\n                        <QuarterPageHeader>\r\n                            <Typography variant=\"h4\" component=\"h1\">Spiel erstellt!</Typography>\r\n                        </QuarterPageHeader>\r\n                        <Centering>\r\n                            <Caption>Das Spiel ist jetzt für 24 Stunden gültig. Teile den Link, damit deine Freunde deinem Spiel beitreten können.</Caption>\r\n                        </Centering>\r\n\r\n                        <Placeholder factor={2}/>\r\n\r\n                        <SectionTitle standard=\"Link zum Teilen\"/>\r\n                        <LinkedLink href={link} color=\"inherit\" className={classes.link}>{link}</LinkedLink>\r\n\r\n                        <Placeholder/>\r\n\r\n                        <Centering>\r\n                            <Button onClick={handleClickShare}><ShareRounded style={{marginLeft: \"-6px\", marginRight: \"16px\"}}/>Teilen</Button>\r\n                        </Centering>\r\n                    </Fragment>\r\n                )}\r\n                {!link && (\r\n                    <QuarterPageHeader>\r\n                        <Typography variant=\"h4\" component=\"h1\">Bitte erstelle zuerst ein Spiel.</Typography>\r\n                    </QuarterPageHeader>\r\n                )}\r\n            </Content>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default SharePage;","import React from \"react\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport Content from \"../components/content\";\r\nimport PageTitle from \"../components/page-title\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"../components/centering\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport SectionTitle from \"../components/section-title\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport { LinkRounded } from \"@material-ui/icons\";\r\nimport { version } from \"../../version\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    bottom: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        marginBottom: \"16px\",\r\n    },\r\n    link: {\r\n        verticalAlign: \"top\"\r\n    }\r\n}));\r\n\r\nconst AboutPage = () => {\r\n    useTitle(\"Über | SightMe\");\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <BackBar href={\"/\"}/>\r\n            <FullHeightContent>\r\n                <PageTitle standard=\"Über \" colored=\"SightMe\"/>\r\n                <Typography variant=\"body1\">\r\n                    SightMe ist durch die Idee eines Freundes entstanden. Sein Vater und ein paar Freunde von ihm haben\r\n                    früher ein Spiel gespielt, bei dem sich einer in der Stadt mit seinem Auto \"versteckt\".\r\n                    Derjenige hat dann sein CB-Funkgerät angeschaltet und die anderen mussten ihn dann Anhand der\r\n                    Signalstärke von ihm finden. Aus dem Spiel wurde die Idee für eine App, und später dann diese App.\r\n                </Typography>\r\n\r\n                <Placeholder/>\r\n                <SectionTitle standard=\"Funktionsweise\"/>\r\n                <Typography variant=\"body1\">\r\n                    Wenn der Spielleiter ein Spiel erstellt, werden alle benötigten Spieldaten in einem Link mittels\r\n                    Base64 zusammengefasst. Wenn die anderen Teilnehmer diesen Link öffnen, wird anhand der Distanz zum\r\n                    Ziel das blinken des Kreises berechnet.\r\n                </Typography>\r\n\r\n                <Placeholder/>\r\n                <SectionTitle standard=\"Links\"/>\r\n                <Typography variant=\"body1\"><LinkRounded/> <Link href=\"https://github.com/Lennart401/sightme\" className={classes.link}>github.com/Lennart401/sightme</Link></Typography>\r\n\r\n                <Placeholder/>\r\n            </FullHeightContent>\r\n\r\n            <Content>\r\n                <Centering className={classes.bottom}>\r\n                    <Typography variant=\"body2\">Version {version}</Typography>\r\n                    <Typography variant=\"body2\">&copy; 2020 Lennart Popkes</Typography>\r\n                </Centering>\r\n            </Content>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default AboutPage;","// generated by genversion\nexport const version = '1.0.0'\n","import React from 'react';\nimport './App.css';\nimport { useRoutes } from \"hookrouter\";\nimport IndexPage from \"./ui/pages/index-page\";\nimport HostPage from \"./ui/pages/host-page\";\nimport JoinPage from \"./ui/pages/join-page\";\nimport PlayPage from \"./ui/pages/play-page\";\nimport NotFoundPage from \"./ui/pages/not-found-page\";\nimport { createMuiTheme } from \"@material-ui/core\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport green from \"@material-ui/core/colors/green\";\nimport StateSnackbar from \"./ui/components/state-snackbar\";\nimport SharePage from \"./ui/pages/share-page\";\nimport AboutPage from \"./ui/pages/about-page\";\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: blue,\n        secondary: green,\n    },\n    overrides: {\n        MuiButton: {\n            root: {\n                borderRadius: \"5em\",\n            },\n            label: {\n                paddingLeft: \"1em\",\n                paddingRight: \"1em\",\n                paddingTop: \"0.3em\",\n                paddingBottom: \"0.3em\"\n            }\n        },\n        MuiIconButton: {\n            root: {\n                color: \"#000\"\n            }\n        },\n        MuiOutlinedInput: {\n            root: {\n                borderRadius: \"5em\"\n            },\n            input: {\n                padding: \"16px 24px\"\n            }\n        },\n        MuiDialogActions: {\n            root: {\n                flexDirection: \"column\",\n                \"& > :not(:first-child)\" : {\n                    marginTop: \"6px\"\n                }\n            }\n        },\n        MuiSnackbarContent: {\n            root: {\n                flexWrap: \"nowrap\"\n            }\n        },\n        MuiSwitch: {\n            root: {\n                width: \"48px\"\n            },\n            switchBase: {\n                \"&$checked\": {\n                    transform: \"translateX(10px)\"\n                }\n            }\n        },\n    },\n    props: {\n        MuiButton: {\n            color: \"secondary\",\n            variant: \"contained\"\n        },\n        MuiTextField: {\n            variant: \"outlined\",\n            fullWidth: true,\n        },\n        MuiDialogActions: {\n            disableSpacing: true\n        }\n    }\n});\n\nconst routes = {\n    \"/\": () => <IndexPage/>,\n    \"/host\": () => <HostPage/>,\n    \"/share\": () => <SharePage/>,\n    \"/join/:game\": ({game}) => <JoinPage gameBase64={game}/>,\n    \"/play\": () => <PlayPage/>,\n    \"/about\": () => <AboutPage/>\n};\n\nconst App = () => {\n    const routeResult = useRoutes(routes);\n\n    return (\n        <ThemeProvider theme={theme}>\n            <StateSnackbar stateName=\"global\" useAlert={false}/>\n            {routeResult || <NotFoundPage/>}\n        </ThemeProvider>\n    );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {setBasepath} from \"hookrouter\";\nimport moment from \"moment\";\nimport {Provider} from \"react-redux\";\nimport { persistor, store } from \"./logic/store\";\nimport { PersistGate } from \"redux-persist/integration/react\";\n\nsetBasepath(process.env.PUBLIC_URL);\n\nmoment().locale(\"de\");\n\nReactDOM.render(\n    <Provider store={store}>\n        <PersistGate loading={null} persistor={persistor}>\n            <App/>\n        </PersistGate>\n    </Provider>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}