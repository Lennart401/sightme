{"version":3,"sources":["ui/components/dual-color-typography.js","ui/components/half-page-header.js","ui/components/caption.js","ui/components/placeholder.js","logic/with-delay.js","ui/components/linked-button.js","ui/components/centering.js","logic/store.js","logic/store-util.js","logic/active-game.js","ui/components/content.js","ui/components/full-height-wrapper.js","ui/components/full-height-content.js","ui/pages/index-page.js","ui/components/linked-icon-button.js","ui/components/back-bar.js","ui/components/page-title.js","ui/components/map-container.js","logic/use-geolocation.js","logic/hosting.js","ui/components/section-title.js","ui/pages/host-page.js","ui/components/button-box.js","ui/pages/join-page.js","ui/components/confirm-dialog.js","logic/dialogs.js","logic/use-distance.js","ui/components/tendency.js","ui/components/distance.js","ui/components/large-ripple.js","ui/components/active-game-wrapper.js","ui/components/vertical-bar.js","ui/pages/play-page.js","ui/pages/not-found-page.js","ui/components/alert.js","logic/messages.js","ui/components/state-snackbar.js","ui/components/quarter-page-header.js","ui/components/linked-link.js","ui/pages/share-page.js","ui/pages/about-page.js","version.js","ui/components/checked-textfield.js","ui/pages/enter-name-page.js","ui/components/label-with-control.js","ui/pages/game-options-page.js","ui/pages/confirm-position-page.js","App.js","serviceWorker.js","index.js"],"names":["DualColorTypography","standard","colored","variant","component","Typography","color","useStyles","makeStyles","hugeVerticalPadding","paddingTop","paddingBottom","paddingLeft","paddingRight","textAlign","hugeVerticalPaddingNoHorizontal","HalfPageHeader","children","noHorizontalPadding","classes","Box","className","Caption","margin","style","marginLeft","marginRight","Placeholder","factor","size","marginTop","navigateWithDelay","args","setTimeout","navigate","LinkedButton","props","Button","onClick","event","preventDefault","href","Centering","reducers","allStoreEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","persistConfig","key","storage","whitelist","store","createStore","persistReducer","s","persistor","persistStore","injectReducer","reducer","replaceReducer","combineReducers","getState","storeKey","subscribe","func","lastState","makeActionName","name","SET_ACTIVE_GAME","LEAVE_ACTIVE_GAME","SET_INITIAL_DISTANCE","state","game","produce","draft","initialDistance","leaveActiveGame","dispatch","type","payload","useActiveGame","useState","setState","useLayoutEffect","moment","isAfter","content","Content","classNames","fullHeightWrapper","display","flexDirection","justifyContent","alignItems","minHeight","FullHeightWrapper","fullHeightContent","flexGrow","flexShrink","flexBasis","width","FullHeightContent","about","marginBottom","IndexPage","useTitle","LinkedIconButton","IconButton","theme","offsetFromTop","offset","mixins","toolbar","morePadding","BackBar","undefined","history","back","AppBar","position","elevation","Toolbar","edge","aria-label","ArrowBackRounded","titlePadding","PageTitle","MapContainer","location","coords","latitude","longitude","zoom","setZoom","Map","center","height","onViewportChanged","viewport","TileLayer","attribution","url","Marker","Popup","useGeolocation","setLocation","useEffect","id","navigator","geolocation","watchPosition","enableHighAccuracy","timeout","maximumAge","clearWatch","GENERATE_LINK","SET_USERNAME","SET_EXPIRES_AT","SET_LAT_LNG","SET_OPTION","gameData","expiresAt","lat","lng","assist","tendency","options","TENDENCY","dyndist","DYNAMIC_DISTANCE","nodist","NO_DISTANCE","vbar","USE_VBAR","parameter","Base64","encodeURI","JSON","stringify","origin","username","createDate","option","enable","setOption","initialState","useOption","useLocalState","useCurrentData","SectionTitle","HostPage","disabled","add","utc","format","buttonBox","ButtonBox","JoinPage","gameBase64","parse","decode","e","validHours","diff","isValid","isBefore","infoLines","push","map","line","setActiveGame","ConfirmDialog","open","text","onYes","onNo","Dialog","onClose","DialogContent","DialogActions","SHOW_DIALOG","HIDE_DIALOG","SET_INFO","dialogName","show","info","hideDialog","exp","b","Math","log","useDistance","distance","getDistance","multiplier","frequency","pow","E","fmax","alignInLine","verticalAlign","Tendency","KeyboardArrowUpRounded","KeyboardArrowDownRounded","Distance","round","LargeRipple","handleIteration","top","left","bottom","right","animation","onAnimationIteration","ActiveGameWrapper","container","border","borderRadius","padding","mask","overflow","element","backgroundColor","palette","secondary","main","VerticalBar","percentage","PlayPage","confirm","useDialogState","useAnimation","setUseAnimation","lastFrequency","setLastFrequency","lastDistance","setLastDistance","setTendency","title","NotFoundPage","Alert","SET","CLEAR","message","scope","global","StateSnackbar","stateName","useAlert","severity","actionName","action","errorMessage","useMessage","error","latestError","setLatestError","handleClose","reason","clearMessage","alert","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Fragment","fontSize","QuarterPageHeader","LinkedLink","Link","flexWrap","link","overflowWrap","wordBreak","shareIconBox","SharePage","share","setMessage","ShareRounded","AboutPage","CodeRounded","target","useCheckedTextfield","maxLength","setText","helperText","setHelperText","validate","length","TextField","value","onChange","newText","EnterNamePage","placeholder","currentData","wrapper","LabelWithControl","label","control","GameOptionsPage","enableTendency","enableDynamicDistance","enableNoDistance","enableVBar","Switch","checked","ConfirmPositionPage","createMuiTheme","primary","blue","green","overrides","MuiButton","root","MuiIconButton","MuiOutlinedInput","input","MuiDialogActions","MuiSnackbarContent","MuiSwitch","switchBase","transform","MuiTextField","fullWidth","disableSpacing","routes","App","routeResult","useRoutes","ThemeProvider","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","onUpdate","onSuccess","catch","setBasepath","process","locale","ReactDOM","render","loading","document","getElementById","URL","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.737df663.chunk.js","sourcesContent":["import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst DualColorTypography = ({standard, colored, variant, component}) => {\r\n    return (\r\n        <Typography component={component || \"div\"} variant={variant || \"body1\"}>\r\n            <Typography component=\"span\" variant={variant || \"body1\"}>{standard}</Typography>\r\n            <Typography component=\"span\" color=\"secondary\" variant={variant || \"body1\"}>{colored}</Typography>\r\n        </Typography>\r\n    );\r\n};\r\n\r\nexport default DualColorTypography;","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    hugeVerticalPadding: {\r\n        paddingTop: \"25vh\",\r\n        paddingBottom: \"15vh\",\r\n        paddingLeft: \"1em\",\r\n        paddingRight: \"1em\",\r\n        textAlign: \"center\"\r\n    },\r\n    hugeVerticalPaddingNoHorizontal: {\r\n        paddingTop: \"25vh\",\r\n        paddingBottom: \"15vh\",\r\n        textAlign: \"center\"\r\n    },\r\n}));\r\n\r\nconst HalfPageHeader = ({children, noHorizontalPadding}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box className={noHorizontalPadding ? classes.hugeVerticalPaddingNoHorizontal : classes.hugeVerticalPadding}>\r\n            {children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default HalfPageHeader;","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst Caption = ({children, margin = \"0em\"}) => {\r\n    return (\r\n        <Typography variant=\"body2\" color=\"textSecondary\" style={{marginLeft: margin, marginRight: margin}}>{children}</Typography>\r\n    );\r\n};\r\n\r\nexport default Caption;","import React from \"react\";\r\n\r\nconst Placeholder = ({factor = 1}) => {\r\n    const size = 2 * factor;\r\n    return <p style={{marginTop: size + \"em\"}}/>;\r\n};\r\n\r\nexport default Placeholder;","import { navigate } from \"hookrouter\";\r\n\r\nconst WAIT_DELAY = 250;\r\n\r\nexport const navigateWithDelay = (...args) => {\r\n    setTimeout(() => navigate(...args), WAIT_DELAY);\r\n}\r\n\r\nexport const executeWithDelay = (func) => {\r\n    setTimeout(func, WAIT_DELAY);\r\n}\r\n\r\nexport const navigateWithCustomDelay = (delay, ...args) => {\r\n    setTimeout(() => navigate(...args), delay);\r\n};","import React from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {navigateWithDelay} from \"../../logic/with-delay\";\r\n\r\nconst LinkedButton = (props) => {\r\n    return (\r\n        <Button {...props} onClick={event => {\r\n            event.preventDefault();\r\n            navigateWithDelay(props.href);\r\n        }}>\r\n            {props.children}\r\n        </Button>\r\n    );\r\n};\r\n\r\nexport default LinkedButton;","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nconst Centering = (props) => {\r\n    return (\r\n        <Box {...props} style={{textAlign: \"center\"}}>\r\n            {props.children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default Centering;","import { combineReducers, compose, createStore } from \"redux\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport { persistReducer, persistStore } from \"redux-persist\";\r\n\r\nlet reducers = {};\r\n\r\nconst composeEnhancers = (typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__) || compose;\r\nconst allStoreEnhancers = composeEnhancers(\r\n    //applyMiddleware(thunkMiddleware),\r\n    // (window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\r\n);\r\n\r\nconst persistConfig = {\r\n    key: \"active-game\",\r\n    storage: storage,\r\n    whitelist: [\"active-game\"]\r\n}\r\n\r\nexport const store = createStore(persistReducer(persistConfig, s => s), allStoreEnhancers); // allStoreEnhancers\r\nexport const persistor = persistStore(store);\r\n\r\nstore.injectReducer = (key, reducer) => {\r\n    reducers[key] = reducer;\r\n    store.replaceReducer(persistReducer(persistConfig, combineReducers(reducers)));\r\n};","import { store } from \"./store\";\r\n\r\nexport const getState = (storeKey) => store.getState()[storeKey];\r\n\r\nexport const subscribe = (storeKey, func) => {\r\n    let lastState = getState(storeKey);\r\n    return store.subscribe(() => {\r\n        if (lastState !== getState(storeKey)) {\r\n            lastState = getState(storeKey);\r\n            func(lastState);\r\n        }\r\n    });\r\n};\r\n\r\nexport const makeActionName = (storeKey, name) => `${storeKey}/${name}`;\r\n\r\nexport const setImmediateInterval = (func, interval) => {\r\n    func();\r\n    return setInterval(func, interval);\r\n};","import { getState, makeActionName, subscribe } from \"./store-util\";\r\nimport produce from \"immer\";\r\nimport { store } from \"./store\";\r\nimport { useLayoutEffect, useState } from \"react\";\r\nimport moment from \"moment\";\r\n\r\n/**\r\n * @typedef {Object} Game\r\n * @property {string} name - The host's name\r\n * @property {string} expiresAt - When the game expires, ISO 8601 date string\r\n * @property {number} lat - The host's latitude\r\n * @property {number} lng - The host's longitude\r\n * @property {number} initialDistance - if assist.dyndist is set, the initial distance to the target\r\n * @property {GameAssistance} assist - Assistance flags (e.g. tendency)\r\n */\r\n\r\n/**\r\n * @typedef {Object} GameAssistance\r\n * @property {boolean} tendency - show tendency to participants\r\n * @property {boolean} dyndist - use dynamic distance (e.g. calculate blinking factor on the fly) instead of fixed distance\r\n * @property {boolean} vbar - use vertically filling bar instead of blinking circle\r\n */\r\n\r\nconst storeKey = \"active-game\";\r\n\r\n// DEFINITIONS\r\nconst SET_ACTIVE_GAME = makeActionName(storeKey, \"set-active-game\");\r\nconst LEAVE_ACTIVE_GAME = makeActionName(storeKey, \"leave-active-game\");\r\n\r\nconst SET_INITIAL_DISTANCE = makeActionName(storeKey, \"set-initial-distance\");\r\n\r\nconst reducers = {\r\n    [SET_ACTIVE_GAME]: (state, game) => produce(state, draft => {\r\n        return game;\r\n    }),\r\n    [LEAVE_ACTIVE_GAME]: (state) => produce(state, draft => {\r\n        delete draft[\"name\"];\r\n        delete draft[\"expiresAt\"];\r\n        delete draft[\"lat\"];\r\n        delete draft[\"lng\"];\r\n\r\n        delete draft[\"initialDistance\"];\r\n        delete draft[\"assist\"];\r\n    }),\r\n\r\n    [SET_INITIAL_DISTANCE]: (state, initialDistance) => produce(state, draft => {\r\n        draft[\"initialDistance\"] = initialDistance;\r\n    })\r\n};\r\n\r\n// EXPORTS -- setters\r\nexport const setActiveGame = (game) => {\r\n    store.dispatch({type: SET_ACTIVE_GAME, payload: game});\r\n};\r\n\r\nexport const leaveActiveGame = () => {\r\n    store.dispatch({type: LEAVE_ACTIVE_GAME, payload: {}});\r\n};\r\n\r\nexport const setInitialDistance = (initialDistance) => {\r\n    store.dispatch({type: SET_INITIAL_DISTANCE, payload: initialDistance});\r\n}\r\n\r\nstore.injectReducer(storeKey, (state = {}, {type, payload}) =>\r\n    reducers[type] ? reducers[type](state, payload) : state\r\n);\r\n\r\n// -- hooks\r\n/**\r\n *\r\n * @returns {Game|undefined}\r\n */\r\nexport const useActiveGame = () => {\r\n    const [state, setState] = useState(getState(storeKey));\r\n    useLayoutEffect(() => subscribe(storeKey, setState), [setState]);\r\n\r\n    // Leave active game if currentTime > expiredAt\r\n    if (state) {\r\n        if (moment().isAfter(state[\"expiresAt\"])) {\r\n            leaveActiveGame();\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    if (state?.name) {\r\n        return state;\r\n    }\r\n\r\n    return undefined;\r\n};","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport classNames from \"classnames\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    content: {\r\n        marginLeft: \"24px\",\r\n        marginRight: \"24px\"\r\n    }\r\n}));\r\n\r\nconst Content = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box {...props} className={classNames(props.className, classes.content)}>\r\n            {props.children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default Content;","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport classNames from \"classnames\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    fullHeightWrapper: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        minHeight: \"100%\"\r\n    }\r\n}));\r\n\r\nconst FullHeightWrapper = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box {...props} className={classNames(classes.fullHeightWrapper, props.className)}>\r\n            {props.children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default FullHeightWrapper;","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport Content from \"./content\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Placeholder from \"./placeholder\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    fullHeightContent: {\r\n        flexGrow: 1,\r\n        flexShrink: 1,\r\n        flexBasis: \"auto\",\r\n        width: \"100%\"\r\n    }\r\n}));\r\n\r\nconst FullHeightContent = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box className={classes.fullHeightContent}>\r\n            <Content {...props}>\r\n                {props.children}\r\n                <Placeholder/>\r\n            </Content>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default FullHeightContent;","import React from \"react\";\r\nimport DualColorTypography from \"../components/dual-color-typography\";\r\nimport HalfPageHeader from \"../components/half-page-header\";\r\nimport Caption from \"../components/caption\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport LinkedButton from \"../components/linked-button\";\r\nimport Centering from \"../components/centering\";\r\nimport { useActiveGame } from \"../../logic/active-game\";\r\nimport Content from \"../components/content\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    about: {\r\n        marginBottom: \"8px\"\r\n    }\r\n}));\r\n\r\nconst IndexPage = () => {\r\n    useTitle(\"SightMe\");\r\n    const game = useActiveGame();\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <FullHeightContent>\r\n                <HalfPageHeader noHorizontalPadding>\r\n                    <DualColorTypography variant=\"h2\" component=\"h1\" standard=\"Sight\" colored=\"Me\"/>\r\n                </HalfPageHeader>\r\n                <Centering>\r\n                    <LinkedButton href={\"/host\"}>Spiel erstellen</LinkedButton>\r\n                    <Placeholder/>\r\n\r\n                    {game && (\r\n                        <LinkedButton href={\"/play\"}>{game.name}'s Spiel</LinkedButton>\r\n                    )}\r\n                    {!game && (\r\n                        <Caption margin=\"1em\">Du nimmst aktuell an keinem aktiven Spiel teil. Du erhältst vom Spielleiter einen Link zum Beitreten.</Caption>\r\n                    )}\r\n                </Centering>\r\n            </FullHeightContent>\r\n\r\n            <Content className={classes.about}>\r\n                <Centering>\r\n                    <LinkedButton variant=\"text\" href={\"/about\"}>Über die App</LinkedButton>\r\n                </Centering>\r\n            </Content>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default IndexPage;","import React from \"react\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\n\r\nconst LinkedIconButton = (props) => {\r\n    return (\r\n        <IconButton {...props} onClick={event => {\r\n            event.preventDefault();\r\n            navigateWithDelay(props.href);\r\n        }}>\r\n            {props.children}\r\n        </IconButton>\r\n    );\r\n};\r\n\r\nexport default LinkedIconButton;","import React, { Fragment } from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport LinkedIconButton from \"./linked-icon-button\";\r\nimport { ArrowBackRounded } from \"@material-ui/icons\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport classNames from \"classnames\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    offsetFromTop: {\r\n        paddingTop: \"3vh\"\r\n    },\r\n    offset: theme.mixins.toolbar,\r\n    morePadding: {\r\n        paddingLeft: \"21px\",\r\n        paddingRight: \"21px\"\r\n    }\r\n}));\r\n\r\nconst BackBar = ({href, onClick}) => {\r\n    const classes = useStyles();\r\n\r\n    if (href) onClick = undefined;\r\n    if (!href && !onClick) onClick = () => window.history.back();\r\n\r\n    return (\r\n        <Fragment>\r\n            <AppBar position=\"fixed\" className={classes.offsetFromTop} color=\"transparent\" elevation={0}>\r\n                <Toolbar className={classes.morePadding}>\r\n                    {href && (\r\n                        <LinkedIconButton href={href} edge=\"start\" aria-label=\"back\">\r\n                            <ArrowBackRounded/>\r\n                        </LinkedIconButton>\r\n                    )}\r\n                    {onClick && (\r\n                        <IconButton onClick={onClick} edge=\"start\" aria-label=\"back\">\r\n                            <ArrowBackRounded/>\r\n                        </IconButton>\r\n                    )}\r\n                </Toolbar>\r\n            </AppBar>\r\n            <div className={classNames(classes.offset, classes.offsetFromTop)}/>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default BackBar;","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DualColorTypography from \"./dual-color-typography\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    titlePadding: {\r\n        paddingTop: \"0.5em\",\r\n        paddingBottom: \"3em\"\r\n    }\r\n}));\r\n\r\nconst PageTitle = ({standard, colored}) => {\r\n    const classes = useStyles();\r\n    const variant = \"h6\";\r\n\r\n    if (colored) {\r\n        return (\r\n            <Box className={classes.titlePadding}>\r\n                <DualColorTypography variant={variant} component=\"h1\" standard={standard} colored={colored}/>\r\n            </Box>\r\n        );\r\n    } else {\r\n        return (\r\n            <Box className={classes.titlePadding}>\r\n                <Typography variant={variant} component=\"h1\">{standard}</Typography>\r\n            </Box>\r\n        );\r\n    }\r\n};\r\n\r\nexport default PageTitle;","import React, { Fragment, useState } from \"react\";\r\nimport { Map, Marker, Popup, TileLayer } from \"react-leaflet\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"./centering\";\r\n\r\nconst MapContainer = ({location}) => {\r\n    const position = [location?.coords?.latitude, location?.coords?.longitude];\r\n    const [zoom, setZoom] = useState(14);\r\n\r\n    return (\r\n        <Fragment>\r\n            {location && (\r\n                <Map center={position} zoom={zoom} style={{height: \"30vmax\"}} onViewportChanged={viewport => {\r\n                    setZoom(viewport.zoom);\r\n                }}>\r\n                    <TileLayer\r\n                        attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                    />\r\n                    <Marker position={position}>\r\n                        <Popup>Deine Position</Popup>\r\n                    </Marker>\r\n                </Map>\r\n            )}\r\n            {!location && (\r\n                <div style={{width: \"100%\", height: \"30vmax\"}}>\r\n                    <Centering>\r\n                        <Typography variant=\"body2\">GPS-Position ist unbekannt. Bitte erlaube den Standort für diese App</Typography>\r\n                    </Centering>\r\n                </div>\r\n            )}\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default MapContainer;","import { useEffect, useState } from \"react\";\r\n\r\nconst useGeolocation = () => {\r\n    const [location, setLocation] = useState(null);\r\n\r\n    useEffect(() => {\r\n        let id = undefined;\r\n        if (navigator.geolocation) {\r\n            id = navigator.geolocation.watchPosition(position => {\r\n                setLocation(position);\r\n            }, () => {}, {\r\n                enableHighAccuracy: true,\r\n                timeout: 5000,\r\n                maximumAge: 0\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            if (id) {\r\n                navigator.geolocation.clearWatch(id);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    return location;\r\n};\r\n\r\nexport default useGeolocation;","import { getState, makeActionName, subscribe } from \"./store-util\";\r\nimport produce from \"immer\";\r\nimport { store } from \"./store\";\r\nimport { useLayoutEffect, useState } from \"react\";\r\nimport { Base64 } from \"js-base64\";\r\n\r\nconst storeKey = \"hosting\";\r\n\r\n// DEFINITIONS\r\nconst GENERATE_LINK = makeActionName(storeKey, \"generate-link\");\r\nconst SET_USERNAME = makeActionName(storeKey, \"set-username\");\r\nconst SET_EXPIRES_AT = makeActionName(storeKey, \"set-create-date\");\r\nconst SET_LAT_LNG = makeActionName(storeKey, \"set-lat-lng\");\r\nconst SET_OPTION = makeActionName(storeKey, \"set-option\");\r\n\r\nconst reducers = {\r\n    [GENERATE_LINK]: (state) => produce(state, draft => {\r\n        /** @type {Game} */\r\n        const gameData = {\r\n            name: state[\"name\"],\r\n            expiresAt: state[\"expiresAt\"],\r\n            lat: state[\"latitude\"],\r\n            lng: state[\"longitude\"],\r\n            assist: {\r\n                tendency: state[options.TENDENCY],\r\n                dyndist: state[options.DYNAMIC_DISTANCE],\r\n                nodist: state[options.NO_DISTANCE],\r\n                vbar: state[options.USE_VBAR]\r\n            }\r\n        };\r\n\r\n        const parameter = Base64.encodeURI(JSON.stringify(gameData));\r\n        draft[\"link\"] = window.origin + \"/sightme/join/\" + parameter;\r\n    }),\r\n\r\n    [SET_USERNAME]: (state, username) => produce(state, draft => {draft[\"name\"] = username}),\r\n    [SET_EXPIRES_AT]: (state, createDate) => produce(state, draft => {draft[\"expiresAt\"] = createDate}),\r\n    [SET_LAT_LNG]: (state, {lat, lng}) => produce(state, draft => {\r\n        draft[\"latitude\"] = lat;\r\n        draft[\"longitude\"] = lng;\r\n    }),\r\n    [SET_OPTION]: (state, {option, enable}) => produce(state, draft => {draft[option] = enable})\r\n};\r\n\r\nexport const options = {\r\n    TENDENCY: \"assist-tendency\",\r\n    DYNAMIC_DISTANCE: \"assist-dyndist\",\r\n    NO_DISTANCE: \"assist-nodist\",\r\n    USE_VBAR: \"assist-use-vbar\"\r\n};\r\n\r\n// EXPORTS -- setters\r\nexport const generateLink = () =>\r\n    store.dispatch({type: GENERATE_LINK, payload: {}});\r\n\r\nexport const setUsername = (username) =>\r\n    store.dispatch({type: SET_USERNAME, payload: username});\r\n\r\nexport const setExpiresAt = (createDate) =>\r\n    store.dispatch({type: SET_EXPIRES_AT, payload: createDate});\r\n\r\nexport const setLatLng = (lat, lng) =>\r\n    store.dispatch({type: SET_LAT_LNG, payload: {lat, lng}});\r\n\r\nexport const setOption = (option, enable) =>\r\n    store.dispatch({type: SET_OPTION, payload: {option, enable}});\r\n\r\n// const initialState = {\r\n//     latitude: 53.3037056,\r\n//     longitude: 10.544742399999999,\r\n//     expiresAt: '2020-07-04T22:53:20Z',\r\n//     name: 'Lennart',\r\n//     link: 'http://localhost:3000/sightme/join/eyJuYW1lIjoiTGVubmFydCIsImV4cGlyZXNBdCI6IjIwMjAtMDctMDRUMjI6NTM6MjBaIiwibGF0Ijo1My4zMDM3MDU2LCJsbmciOjEwLjU0NDc0MjM5OTk5OTk5OX0'\r\n// };\r\n\r\nconst initialState = {\r\n    // latitude: 53.3037056,\r\n    // longitude: 10.544742399999999,\r\n    // expiresAt: '2020-07-04T22:53:20Z',\r\n    // name: 'Lennart',\r\n    // link: 'http://localhost:3000/sightme/join/eyJuYW1lIjoiTGVubmFydCIsImV4cGlyZXNBdCI6IjIwMjAtMDctMDRUMjI6NTM6MjBaIiwibGF0Ijo1My4zMDM3MDU2LCJsbmciOjEwLjU0NDc0MjM5OTk5OTk5OX0',\r\n    [options.TENDENCY]: true,\r\n    [options.DYNAMIC_DISTANCE]: false,\r\n    [options.NO_DISTANCE]: false,\r\n    [options.USE_VBAR]: false\r\n};\r\n\r\nstore.injectReducer(storeKey, (state = initialState, {type, payload}) =>\r\n    reducers[type] ? reducers[type](state, payload) : state\r\n);\r\n\r\n// -- hooks\r\nexport const useLink = () => {\r\n    return useLocalState()[\"link\"];\r\n};\r\n\r\nexport const useOption = (option) => {\r\n    return useLocalState()[option];\r\n};\r\n\r\nexport const useCurrentData = () => {\r\n    return useLocalState();\r\n};\r\n\r\nconst useLocalState = () => {\r\n    const [state, setState] = useState(getState(storeKey));\r\n    useLayoutEffect(() => subscribe(storeKey, setState), [setState]);\r\n    return state;\r\n};","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport DualColorTypography from \"./dual-color-typography\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    titlePadding: {\r\n        paddingTop: \"0.5em\",\r\n        paddingBottom: \"0.5em\"\r\n    }\r\n}));\r\n\r\nconst SectionTitle = ({standard, colored}) => {\r\n    const classes = useStyles();\r\n    const variant = \"subtitle2\";\r\n\r\n    if (colored) {\r\n        return (\r\n            <Box className={classes.titlePadding}>\r\n                <DualColorTypography variant={variant} component=\"h1\" standard={standard} colored={colored}/>\r\n            </Box>\r\n        );\r\n    } else {\r\n        return (\r\n            <Box className={classes.titlePadding}>\r\n                <Typography variant={variant} component=\"h1\">{standard}</Typography>\r\n            </Box>\r\n        );\r\n    }\r\n};\r\n\r\nexport default SectionTitle;","import React, { Fragment } from \"react\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport Content from \"../components/content\";\r\nimport PageTitle from \"../components/page-title\";\r\nimport MapContainer from \"../components/map-container\";\r\nimport useGeolocation from \"../../logic/use-geolocation\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport Centering from \"../components/centering\";\r\nimport Caption from \"../components/caption\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\nimport { setExpiresAt, setLatLng } from \"../../logic/hosting\";\r\nimport moment from \"moment\";\r\nimport SectionTitle from \"../components/section-title\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst HostPage = () => {\r\n    useTitle(\"Spiel hosten | SightMe\");\r\n    const location = useGeolocation();\r\n\r\n    // Create button handler --> opens dialog\r\n    const handleClickCreate = () => {\r\n        setLatLng(location.coords.latitude, location.coords.longitude);\r\n        setExpiresAt(moment().add(1, 'days').utc().format());\r\n        // executeWithDelay(() => showDialog(ENTER_NAME_DIALOG));\r\n        navigateWithDelay(\"/host/enter-name\");\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <BackBar href={\"/\"}/>\r\n            <Content>\r\n                <PageTitle standard=\"Ein Spiel hosten\"/>\r\n\r\n                {/* Map-Section with Title and Map */}\r\n                <SectionTitle standard=\"Dein Standort\"/>\r\n                <MapContainer location={location}/>\r\n                <Placeholder/>\r\n\r\n                {/* Create-Button or location permission message */}\r\n                <Centering>\r\n                    <Button disabled={!location} onClick={handleClickCreate}>Spiel hier erstellen</Button>\r\n                    {!location && (\r\n                        <Fragment>\r\n                            <Placeholder/>\r\n                            <Caption>Bitte erlaube den Standort für diese App</Caption>\r\n                        </Fragment>\r\n                    )}\r\n                </Centering>\r\n            </Content>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default HostPage;","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Content from \"./content\";\r\nimport classNames from \"classnames\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    buttonBox: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        marginBottom: \"8px\",\r\n\r\n        \"& > :not(:first-child)\": {\r\n            marginTop: \"6px\"\r\n        }\r\n    }\r\n}));\r\n\r\nconst ButtonBox = (props) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Content style={props.style} className={classNames(props.className, classes.buttonBox)}>\r\n            {props.children}\r\n        </Content>\r\n    );\r\n};\r\n\r\nexport default ButtonBox;","import React, { Fragment } from \"react\";\r\nimport { Base64 } from \"js-base64\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport PageTitle from \"../components/page-title\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport moment from \"moment\";\r\nimport Centering from \"../components/centering\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport LinkedButton from \"../components/linked-button\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { setActiveGame } from \"../../logic/active-game\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport { useTitle } from \"hookrouter\";\r\nimport ButtonBox from \"../components/button-box\";\r\nimport Caption from \"../components/caption\";\r\n\r\nconst JoinPage = ({gameBase64}) => {\r\n    let game = undefined;\r\n    try {\r\n        game = JSON.parse(Base64.decode(gameBase64));\r\n    } catch (e) {}\r\n\r\n    useTitle(`${game?.name} beitreten | SightMe`);\r\n\r\n    const validHours = moment(game?.expiresAt).diff(moment(), 'hours');\r\n    const isValid = moment().isBefore(moment(game?.expiresAt));\r\n\r\n    const handleClickJoin = () => {\r\n        setActiveGame(game);\r\n\r\n        if (game.assist?.dyndist) {\r\n            navigateWithDelay(`/join/${gameBase64}/confirm-position`);\r\n        } else {\r\n            navigateWithDelay(\"/play\");\r\n        }\r\n    };\r\n\r\n    let infoLines = [];\r\n    if (!game?.assist?.tendency) infoLines.push(\"Keine Richtungs-Tendenz verfügbar für dieses Spiel\");\r\n    if (game?.assist?.dyndist) {\r\n        if (game?.assist?.nodist) infoLines.push(\"Spiel mit dynamischer Distanz\");\r\n        else infoLines.push(\"Spiel mit dynamischer Distanz — Du siehst trotzdem die Distanz zum Host\");\r\n    }\r\n    if (game?.assist?.nodist) infoLines.push(\"Keine Distanz-Anzeige — Du siehst nicht die absolute Distanz zum Host\");\r\n    if (game?.assist?.vbar)\r\n        infoLines.push(\"Dir wird ein vertikaler, sich füllender Balken angezeigt anstatt des blinkenden Kreises\");\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <BackBar href={\"/\"}/>\r\n            <FullHeightContent>\r\n                <PageTitle standard=\"Einem Spiel beitreten\"/>\r\n                <Placeholder factor={2}/>\r\n\r\n                <Centering>\r\n                    {game && (\r\n                        <Fragment>\r\n                            <Typography variant=\"h4\">Host: {game?.name}</Typography><br/>\r\n                            {isValid && (\r\n                                <Typography variant=\"body1\">gültig für die nächsten {validHours} Stunde(n)</Typography>\r\n                            )}\r\n                            {!isValid && (\r\n                                <Typography variant=\"body1\">Das Spiel ist bereit abgelaufen, du kannst ihm nicht mehr beitreten.</Typography>\r\n                            )}\r\n\r\n                            <Placeholder factor={2}/>\r\n\r\n                            {infoLines.map(line => (\r\n                                <Fragment key={line}>\r\n                                    <Caption>{line}</Caption>\r\n                                    <Placeholder factor={0.5}/>\r\n                                </Fragment>\r\n                            ))}\r\n                        </Fragment>\r\n                    )}\r\n                    {!game && (\r\n                        <Typography variant=\"h5\">Im Link befindet sich kein gültiges Spiel. Bitte deinen Spielleiter, dir den Link noch einmal zu schicken.</Typography>\r\n                    )}\r\n                </Centering>\r\n            </FullHeightContent>\r\n\r\n            <ButtonBox>\r\n                <Button onClick={handleClickJoin} disabled={!game || !isValid}>Spiel beitreten</Button>\r\n                <LinkedButton href={\"/\"} variant=\"text\" color=\"inherit\">Abbrechen</LinkedButton>\r\n            </ButtonBox>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default JoinPage;","import React from \"react\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"./centering\";\r\n\r\nconst ConfirmDialog = ({open, text, onYes, onNo}) => {\r\n    return (\r\n        <Dialog open={open} onClose={onNo}>\r\n            <DialogContent>\r\n                <Centering>\r\n                    <Typography variant=\"body1\">{text}</Typography>\r\n                </Centering>\r\n            </DialogContent>\r\n            <DialogActions style={{flexDirection: \"row\", justifyContent: \"center\", alignItems: \"baseline\", paddingBottom: \"16px\"}}>\r\n                <Button variant=\"text\" color=\"inherit\" onClick={onNo}>Nein</Button>\r\n                <Button onClick={onYes}>Ja</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default ConfirmDialog;\r\n\r\n","import { getState, makeActionName, subscribe } from \"./store-util\";\r\nimport produce from \"immer\";\r\nimport { store } from \"./store\";\r\nimport { useLayoutEffect, useState } from \"react\";\r\n\r\nconst storeKey = \"dialogs\";\r\n\r\n// DEFINITIONS\r\nconst SHOW_DIALOG = makeActionName(storeKey, \"show\");\r\nconst HIDE_DIALOG = makeActionName(storeKey, \"hide\");\r\nconst SET_INFO = makeActionName(storeKey, \"setInfo\");\r\n\r\nconst reducers = {\r\n    [SHOW_DIALOG]: (state, dialogName) => produce(state, draft => {\r\n        draft[dialogName] = {...state[dialogName], show: true}\r\n    }),\r\n    [HIDE_DIALOG]: (state, dialogName) => produce(state, draft => {\r\n        draft[dialogName] = {...state[dialogName], show: false}\r\n    }),\r\n\r\n    [SET_INFO]: (state, {dialogName, info}) => produce(state, draft => {\r\n        draft[dialogName] = {...info, show: state[dialogName]?.show}\r\n    })\r\n};\r\n\r\n// EXPORTS -- setters\r\nexport const showDialog = (dialogName) =>\r\n    store.dispatch({type: SHOW_DIALOG, payload: dialogName});\r\n// hideDialog will only be dispatched if the dialog is actually open (in order not to bloat redux timeline)\r\nexport const hideDialog = (dialogName) => {\r\n    if (getState(storeKey)[dialogName]?.show)\r\n        store.dispatch({type: HIDE_DIALOG, payload: dialogName});\r\n};\r\nexport const setDialogInfo = (dialogName, info) =>\r\n    store.dispatch({type: SET_INFO, payload: {dialogName, info}});\r\n\r\nstore.injectReducer(storeKey, (state = {}, {type, payload}) =>\r\n    reducers[type] ? reducers[type](state, payload) : state\r\n);\r\n\r\n// -- hooks\r\n/**\r\n * @param {string} dialogName\r\n * @returns {{show: {boolean}}}\r\n */\r\nexport const useDialogState = (dialogName) => {\r\n    const [state, setState] = useState(getState(storeKey));\r\n    useLayoutEffect(() => subscribe(storeKey, setState), [setState]);\r\n    return state[dialogName];\r\n};","import useGeolocation from \"./use-geolocation\";\r\nimport getDistance from \"geolib/es/getDistance\";\r\nimport { useActiveGame } from \"./active-game\";\r\n\r\nconst exp = {\r\n    fmin: 0.15,\r\n    fmax: 5,\r\n    d: 4000\r\n};\r\n\r\nconst b = (Math.log(exp.fmin / exp.fmax)) / exp.d;\r\n\r\nconst useDistance = () => {\r\n    const location = useGeolocation();\r\n    const game = useActiveGame();\r\n\r\n    const getDynamicMultiplier = () => (Math.log(exp.fmin / exp.fmax)) / (game.initialDistance * 1.8);\r\n\r\n    if (location && game) {\r\n        const distance = getDistance(\r\n            {latitude: location.coords.latitude, longitude: location.coords.longitude},\r\n            {latitude: game.lat, longitude: game.lng},\r\n            1\r\n        );\r\n\r\n        const multiplier = (game.assist?.dyndist && game.initialDistance)\r\n            ? getDynamicMultiplier()\r\n            : b;\r\n        const frequency = exp.fmax * Math.pow(Math.E, multiplier * distance);\r\n\r\n        return {distance, frequency: frequency > 0.05 ? frequency : 0.05, fmax: exp.fmax};\r\n    }\r\n\r\n    return {distance: -1, frequency: -1, fmax: exp.fmax};\r\n};\r\n\r\nexport default useDistance;","import React from \"react\";\r\nimport { KeyboardArrowDownRounded, KeyboardArrowUpRounded } from \"@material-ui/icons\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    alignInLine: {\r\n        verticalAlign: \"middle\"\r\n    }\r\n}));\r\n\r\nconst Tendency = ({game, tendency}) => {\r\n    const classes = useStyles();\r\n\r\n    if (game?.assist?.tendency) {\r\n        if (tendency === 'up') {\r\n            return <KeyboardArrowUpRounded className={classes.alignInLine}/>;\r\n        } else if (tendency === 'down') {\r\n            return <KeyboardArrowDownRounded className={classes.alignInLine}/>;\r\n        }\r\n    }\r\n\r\n    return \"\";\r\n}\r\n\r\nexport default Tendency;","const Distance = ({game, distance}) => {\r\n    if (game.assist?.nodist) {\r\n        return \"\";\r\n    }\r\n\r\n    return \"Distanz \" + (distance < 50\r\n        ? \"< 50 m\"\r\n        : (\r\n            distance < 500\r\n                ? \"< 500 m\"\r\n                : \"~ \" + (Math.round(distance * 0.002) * 0.5) + \" km\"\r\n        )\r\n    ) + \" \";\r\n};\r\n\r\nexport default Distance;","import React from \"react\";\r\nimport { Box } from \"@material-ui/core\";\r\n\r\nconst LargeRipple = ({enable, frequency, handleIteration}) => {\r\n    return (\r\n        <Box style={{\r\n            width: \"100%\",\r\n            paddingTop: \"100%\",\r\n            position: \"relative\",\r\n        }}>\r\n            <Box style={{\r\n                position: \"absolute\",\r\n                top: 0, left: 0, bottom: 0, right: 0,\r\n                animation: enable ? `ripple ${(1 / frequency)}s ease-out infinite` : \"none\"\r\n            }}\r\n                 className=\"ripple\"\r\n                 onAnimationIteration={handleIteration}/>\r\n        </Box>\r\n    );\r\n}\r\n\r\nexport default LargeRipple;","import React from \"react\";\r\nimport Placeholder from \"./placeholder\";\r\nimport Centering from \"./centering\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Content from \"./content\";\r\nimport { useActiveGame } from \"../../logic/active-game\";\r\n\r\nconst ActiveGameWrapper = (props) => {\r\n    const game = useActiveGame();\r\n\r\n    if (game) {\r\n        return props.children;\r\n    } else {\r\n        return (\r\n            <Content>\r\n                <Placeholder factor={2.5}/>\r\n                <Centering>\r\n                    <Typography variant=\"h5\">Es wurde kein aktives Spiel gefunden. Bitte trete erst einem Spiel bei.</Typography>\r\n                </Centering>\r\n            </Content>\r\n        );\r\n    }\r\n};\r\n\r\nexport default ActiveGameWrapper;","import React from \"react\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport {Box} from \"@material-ui/core\";\r\nimport classNames from \"classnames\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        margin: \"auto\",\r\n        border: \"2px solid black\",\r\n        borderRadius: \"100vh\",\r\n        padding: \"8px\",\r\n        height: \"50vh\",\r\n        width: \"20vw\"\r\n    },\r\n    mask: {\r\n        height: \"100%\",\r\n        borderRadius: \"100vh\",\r\n        overflow: \"hidden\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"flex-end\"\r\n    },\r\n    element: {\r\n        backgroundColor: theme.palette.secondary.main,\r\n        borderRadius: \"1em\",\r\n        width: \"100%\"\r\n    }\r\n}));\r\n\r\nconst VerticalBar = ({percentage, style, className}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box style={style} className={classNames(classes.container, className)}>\r\n            <Box className={classes.mask}>\r\n                <Box style={{height: `${percentage * 100}%`}} className={classes.element}/>\r\n            </Box>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default VerticalBar;","import React, { useLayoutEffect, useState } from \"react\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport PageTitle from \"../components/page-title\";\r\nimport { leaveActiveGame, useActiveGame } from \"../../logic/active-game\";\r\nimport { navigate, useTitle } from \"hookrouter\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Centering from \"../components/centering\";\r\nimport { executeWithDelay } from \"../../logic/with-delay\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport ConfirmDialog from \"../components/confirm-dialog\";\r\nimport { hideDialog, showDialog, useDialogState } from \"../../logic/dialogs\";\r\nimport useDistance from \"../../logic/use-distance\";\r\nimport Tendency from \"../components/tendency\";\r\nimport Distance from \"../components/distance\";\r\nimport LargeRipple from \"../components/large-ripple\";\r\nimport ActiveGameWrapper from \"../components/active-game-wrapper\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport ButtonBox from \"../components/button-box\";\r\nimport VerticalBar from \"../components/vertical-bar\";\r\n\r\nconst CONFIRM_LEAVE_DIALOG = \"confirm-leave-dialog\";\r\n\r\nconst PlayPage = () => {\r\n    const game = useActiveGame();\r\n    const {distance, frequency, fmax} = useDistance();\r\n    const confirm = useDialogState(CONFIRM_LEAVE_DIALOG);\r\n    useTitle(`Finde ${game?.name} | SightMe`);\r\n\r\n    const [useAnimation, setUseAnimation] = useState(true);\r\n    const [lastFrequency, setLastFrequency] = useState(0.8);\r\n    const [lastDistance, setLastDistance] = useState(2500);\r\n    const [tendency, setTendency] = useState(null);\r\n\r\n    // distance & tendency logic\r\n    if (lastDistance !== distance) {\r\n        setTendency(distance < lastDistance ? 'up' : 'down');\r\n        setLastDistance(distance);\r\n    }\r\n\r\n    const handleIteration = () => {\r\n        if (lastFrequency !== frequency) {\r\n            setLastFrequency(frequency);\r\n            setUseAnimation(false);\r\n            setTimeout(() => {\r\n                setUseAnimation(true);\r\n            }, 10);\r\n        }\r\n    };\r\n\r\n    const handleLeave = () => {\r\n        leaveActiveGame();\r\n        navigate(\"/\");\r\n    };\r\n\r\n    // make sure the dialog closes when leaving\r\n    useLayoutEffect(() => {\r\n        return () => {\r\n            hideDialog(CONFIRM_LEAVE_DIALOG);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <BackBar href={\"/\"}/>\r\n            <ActiveGameWrapper>\r\n                <FullHeightContent>\r\n                    <PageTitle standard=\"Finde \" colored={game?.name}/>\r\n                    <Placeholder/>\r\n\r\n                    <Centering>\r\n                        {(game?.assist && game?.assist?.vbar) && (\r\n                            <VerticalBar percentage={(frequency / fmax)}/>\r\n                        )}\r\n                        {(game?.assist && !game?.assist?.vbar) && (\r\n                            <LargeRipple enable={useAnimation} frequency={lastFrequency} handleIteration={handleIteration}/>\r\n                        )}\r\n\r\n                        <Placeholder/>\r\n                        <Typography variant=\"body1\">\r\n                            <Distance game={game} distance={lastDistance}/>\r\n                            <Tendency game={game} tendency={tendency}/>\r\n                        </Typography>\r\n                    </Centering>\r\n                </FullHeightContent>\r\n\r\n                <ButtonBox style={{marginBottom: \"24px\"}}>\r\n                    <Button onClick={() => executeWithDelay(() => showDialog(CONFIRM_LEAVE_DIALOG))}>Spiel verlassen</Button>\r\n                </ButtonBox>\r\n\r\n                <ConfirmDialog open={confirm?.show || false}\r\n                               title=\"Spiel verlassen\"\r\n                               text=\"Möchtest du das Spiel wirklich verlassen?\"\r\n                               onNo={() => hideDialog(CONFIRM_LEAVE_DIALOG)}\r\n                               onYes={handleLeave}/>\r\n            </ActiveGameWrapper>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default PlayPage;","import React from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Content from \"../components/content\";\r\nimport Centering from \"../components/centering\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst NotFoundPage = () => {\r\n    useTitle(\"Nicht gefunden | SightMe\");\r\n\r\n    return (\r\n        <Content>\r\n            <Centering>\r\n                <Typography variant=\"body1\">Seite nicht gefunden :/</Typography>\r\n            </Centering>\r\n        </Content>\r\n    );\r\n};\r\n\r\nexport default NotFoundPage;","import React from \"react\";\r\nimport MuiAlert from \"@material-ui/lab/Alert\";\r\n\r\nexport function Alert(props) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}","import { getState, makeActionName, subscribe } from \"./store-util\";\r\nimport { store } from \"./store\";\r\nimport produce from \"immer\";\r\nimport { useLayoutEffect, useState } from \"react\";\r\n\r\nconst storeKey = \"message\";\r\nconst DEFAULT_SCOPE = \"global\";\r\n\r\n// DEFINITIONS\r\nconst SET = makeActionName(storeKey, \"set\");\r\nconst CLEAR = makeActionName(storeKey, \"clear\");\r\n\r\nconst reducers = {\r\n    [SET]: (state, {message, scope}) => produce(state, draft => {draft[scope] = message;}),\r\n    [CLEAR]: (state, scope) => produce(state, draft => {draft[scope] = null;})\r\n}\r\n\r\nconst initialState = {\r\n    global: null\r\n};\r\n\r\n// EXPORTS -- setters\r\nexport const setMessage = (message, scope = DEFAULT_SCOPE) =>\r\n    store.dispatch({type: SET, payload: {message, scope}});\r\n\r\nexport const clearMessage = (scope = DEFAULT_SCOPE) =>\r\n    store.dispatch({type: CLEAR, payload: scope});\r\n\r\nstore.injectReducer(storeKey, (state = initialState, {type, payload}) =>\r\n    reducers[type] ? reducers[type](state, payload) : state\r\n);\r\n\r\n// -- hooks\r\nexport const useMessage = (scope = DEFAULT_SCOPE) => {\r\n    const [state, setState] = useState(getState(storeKey));\r\n    useLayoutEffect(() => subscribe(storeKey, setState), [setState]);\r\n    return state[scope];\r\n};","import React, { useLayoutEffect, useState } from \"react\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport { Alert } from \"./alert\";\r\nimport { clearMessage, useMessage } from \"../../logic/messages\";\r\n\r\n/**\r\n * Use can either use useAlert = true with severity OR action with actionName\r\n */\r\nconst StateSnackbar = ({stateName, useAlert = true, severity = \"error\", actionName = \"Rückgängig\", action = null}) => {\r\n    const errorMessage = useMessage(stateName);\r\n\r\n    const error = errorMessage;\r\n    const open = !!errorMessage;\r\n    const [latestError, setLatestError] = useState(\"\");\r\n\r\n    const handleClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n        }\r\n        if (open) {\r\n            clearMessage(stateName);\r\n        }\r\n    };\r\n\r\n    let alert = null;\r\n    if (useAlert) {\r\n        alert = (\r\n            <Alert severity={severity} onClose={handleClose}>\r\n                {latestError}\r\n            </Alert>\r\n        );\r\n    }\r\n\r\n    useLayoutEffect(() => {\r\n        if (error) {\r\n            setLatestError(error);\r\n        }\r\n    }, [error]);\r\n\r\n    return (\r\n        <Snackbar\r\n            anchorOrigin={{\r\n                vertical: 'bottom',\r\n                horizontal: 'left',\r\n            }}\r\n            open={open}\r\n            autoHideDuration={6000}\r\n            // action={action && <Button onClick={action} size=\"small\" color=\"secondary\">{actionName}</Button>}\r\n            message={!useAlert && latestError}\r\n            onClose={handleClose}\r\n            action={!useAlert && (\r\n                <React.Fragment>\r\n                    {action && (\r\n                        <Button color=\"secondary\" size=\"small\" onClick={action}>\r\n                            {actionName}\r\n                        </Button>\r\n                    )}\r\n                    <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n                        <CloseIcon fontSize=\"small\"/>\r\n                    </IconButton>\r\n                </React.Fragment>\r\n            )}>\r\n            {alert}\r\n        </Snackbar>\r\n    );\r\n};\r\n\r\nexport default StateSnackbar;","import React from \"react\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    hugeVerticalPadding: {\r\n        paddingTop: \"10vh\",\r\n        paddingBottom: \"5vh\",\r\n        paddingLeft: \"1em\",\r\n        paddingRight: \"1em\",\r\n        textAlign: \"center\"\r\n    },\r\n    hugeVerticalPaddingNoHorizontal: {\r\n        paddingTop: \"10vh\",\r\n        paddingBottom: \"5vh\",\r\n        textAlign: \"center\"\r\n    },\r\n}));\r\n\r\nconst QuarterPageHeader = ({children, noHorizontalPadding}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box className={noHorizontalPadding ? classes.hugeVerticalPaddingNoHorizontal : classes.hugeVerticalPadding}>\r\n            {children}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default QuarterPageHeader;","import React from \"react\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\n\r\nconst LinkedLink = (props) => {\r\n    return <Link {...props} onClick={event => {\r\n        event.preventDefault();\r\n        navigateWithDelay(props.href);\r\n    }}/>;\r\n};\r\n\r\nexport default LinkedLink;","import React, { Fragment } from \"react\";\r\nimport { useLink } from \"../../logic/hosting\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport Content from \"../components/content\";\r\nimport QuarterPageHeader from \"../components/quarter-page-header\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"../components/centering\";\r\nimport Caption from \"../components/caption\";\r\nimport SectionTitle from \"../components/section-title\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport LinkedLink from \"../components/linked-link\";\r\nimport { ShareRounded } from \"@material-ui/icons\";\r\nimport { setMessage } from \"../../logic/messages\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    container: {\r\n        display: \"flex\",\r\n        flexDirection: \"row\",\r\n        flexWrap: \"nowrap\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"flex-start\",\r\n    },\r\n    link: {\r\n        overflowWrap: \"anywhere\",\r\n        wordBreak: \"break-all\",\r\n        flexGrow: 1\r\n    },\r\n    shareIconBox: {\r\n        margin: \"0px 16px\"\r\n    }\r\n}));\r\n\r\nconst SharePage = () => {\r\n    useTitle(\"Link zum Spiel teilen | SightMe\");\r\n    const classes = useStyles();\r\n    const link = useLink();\r\n\r\n    // Share button handler\r\n    const handleClickShare = () => {\r\n        if (navigator.share) {\r\n            navigator.share({\r\n                url: link\r\n            });\r\n        } else {\r\n            setMessage(\"Dein Browser unterstützt das Teilen von Links nicht. Bitte kopiere den Link und verschicke ihn manuell.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Fragment>\r\n            <BackBar href={\"/\"}/>\r\n            <Content>\r\n                {link && (\r\n                    <Fragment>\r\n                        <QuarterPageHeader>\r\n                            <Typography variant=\"h4\" component=\"h1\">Spiel erstellt!</Typography>\r\n                        </QuarterPageHeader>\r\n                        <Centering>\r\n                            <Caption>Das Spiel ist jetzt für 24 Stunden gültig. Teile den Link, damit deine Freunde deinem Spiel beitreten können.</Caption>\r\n                        </Centering>\r\n\r\n                        <Placeholder factor={2}/>\r\n\r\n                        <SectionTitle standard=\"Link zum Teilen\"/>\r\n                        <LinkedLink href={link} color=\"inherit\" className={classes.link}>{link}</LinkedLink>\r\n\r\n                        <Placeholder/>\r\n\r\n                        <Centering>\r\n                            <Button onClick={handleClickShare}><ShareRounded style={{marginLeft: \"-6px\", marginRight: \"16px\"}}/>Teilen</Button>\r\n                        </Centering>\r\n                    </Fragment>\r\n                )}\r\n                {!link && (\r\n                    <QuarterPageHeader>\r\n                        <Typography variant=\"h4\" component=\"h1\">Bitte erstelle zuerst ein Spiel.</Typography>\r\n                    </QuarterPageHeader>\r\n                )}\r\n            </Content>\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default SharePage;","import React from \"react\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport Content from \"../components/content\";\r\nimport PageTitle from \"../components/page-title\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"../components/centering\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport SectionTitle from \"../components/section-title\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport { CodeRounded } from \"@material-ui/icons\";\r\nimport { version } from \"../../version\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { useTitle } from \"hookrouter\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    bottom: {\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n        marginBottom: \"16px\",\r\n    },\r\n    link: {\r\n        verticalAlign: \"top\"\r\n    }\r\n}));\r\n\r\nconst AboutPage = () => {\r\n    useTitle(\"Über | SightMe\");\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <BackBar href={\"/\"}/>\r\n            <FullHeightContent>\r\n                <PageTitle standard=\"Über \" colored=\"SightMe\"/>\r\n                <Typography variant=\"body1\">\r\n                    SightMe ist durch die Idee eines Freundes entstanden. Sein Vater und ein paar Freunde von ihm haben\r\n                    früher ein Spiel gespielt, bei dem sich einer in der Stadt mit seinem Auto \"versteckt\".\r\n                    Derjenige hat dann sein CB-Funkgerät angeschaltet und die anderen mussten ihn dann Anhand der\r\n                    Signalstärke von ihm finden. Aus dem Spiel wurde die Idee für eine App, und später dann diese App.\r\n                </Typography>\r\n\r\n                <Placeholder/>\r\n                <SectionTitle standard=\"Funktionsweise\"/>\r\n                <Typography variant=\"body1\">\r\n                    Wenn der Spielleiter ein Spiel erstellt, werden alle benötigten Spieldaten in einem Link mittels\r\n                    Base64 zusammengefasst. Wenn die anderen Teilnehmer diesen Link öffnen, wird anhand der Distanz zum\r\n                    Ziel das blinken des Kreises berechnet.\r\n                </Typography>\r\n\r\n                <Placeholder/>\r\n                <SectionTitle standard=\"Links\"/>\r\n                <Typography variant=\"body1\"><CodeRounded/> <Link href=\"https://github.com/Lennart401/sightme\" target=\"_blank\" className={classes.link}>github.com/Lennart401/sightme</Link></Typography>\r\n            </FullHeightContent>\r\n\r\n            <Content>\r\n                <Centering className={classes.bottom}>\r\n                    <Typography variant=\"body2\">Version {version}</Typography>\r\n                    <Typography variant=\"body2\">&copy; 2020 Lennart Popkes</Typography>\r\n                </Centering>\r\n            </Content>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default AboutPage;","// generated by genversion\nexport const version = '1.2.0'\n","import React, { useState } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nconst useCheckedTextfield = (props, maxLength) => {\r\n    const [text, setText] = useState(\"\");\r\n    const [helperText, setHelperText] = useState(\"\");\r\n\r\n    const handleChange = (event) => {\r\n        const newText = event.target.value;\r\n        if (newText.length > maxLength) setHelperText(\"Eingabe ist zu lang!\");\r\n        else setHelperText(\"\");\r\n        setText(newText);\r\n    };\r\n\r\n    const isContentValid = () => {\r\n        if (text.length === 0) setHelperText(\"Eingabe darf nicht leer sein!\");\r\n        return text.length > 0 && text.length <= maxLength;\r\n    };\r\n\r\n    return {\r\n        validate: isContentValid,\r\n        text: text,\r\n        component: <TextField {...props}\r\n                              value={text}\r\n                              error={helperText.length > 0}\r\n                              helperText={helperText}\r\n                              onChange={handleChange}/>,\r\n    };\r\n};\r\n\r\nexport default useCheckedTextfield;","import React, { useEffect } from \"react\";\r\nimport { setUsername, useCurrentData } from \"../../logic/hosting\";\r\nimport useCheckedTextfield from \"../components/checked-textfield\";\r\nimport { navigate, useTitle } from \"hookrouter\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport ButtonBox from \"../components/button-box\";\r\nimport QuarterPageHeader from \"../components/quarter-page-header\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"../components/centering\";\r\nimport Caption from \"../components/caption\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport LinkedButton from \"../components/linked-button\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\n\r\nconst EnterNamePage = () => {\r\n    useTitle(\"Spiel hosten | SightMe\");\r\n\r\n    const {validate, text, component} = useCheckedTextfield({placeholder: \"Dein Name\"}, 20);\r\n    const currentData = useCurrentData();\r\n\r\n    useEffect(() => {\r\n        if (!currentData.latitude || !currentData.longitude) {\r\n            navigate(\"/host\");\r\n        }\r\n    }, [currentData]);\r\n\r\n    const onSubmit = () => {\r\n        navigateWithDelay(\"game-options\");\r\n    };\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <BackBar href={\"/host\"}/>\r\n\r\n            <FullHeightContent>\r\n                <QuarterPageHeader noHorizontalPadding>\r\n                    <Typography variant=\"h4\" component=\"h1\">Bitte gib deinen Namen ein.</Typography>\r\n                </QuarterPageHeader>\r\n                <Centering>\r\n                    <Caption>Damit wissen die Teilnehmer, dass sie wirklich deinem Spiel beitreten.</Caption>\r\n                    <Placeholder/>\r\n                    {component}\r\n                </Centering>\r\n            </FullHeightContent>\r\n\r\n            <ButtonBox>\r\n                <Button onClick={() => {\r\n                    if (validate()) {\r\n                        setUsername(text);\r\n                        onSubmit();\r\n                    }\r\n                }}>Weiter</Button>\r\n                <LinkedButton variant=\"text\" color=\"inherit\" href={\"/host\"}>Zurück</LinkedButton>\r\n            </ButtonBox>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default EnterNamePage;","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box } from \"@material-ui/core\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nconst useStyles = makeStyles(() => ({\r\n    wrapper: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\"\r\n    }\r\n}));\r\n\r\nconst LabelWithControl = ({label, control}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box className={classes.wrapper}>\r\n            <Typography variant=\"body1\">{label}</Typography>\r\n            {control}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default LabelWithControl;","import React, { useEffect } from \"react\";\r\nimport { navigate, useTitle } from \"hookrouter\";\r\nimport {\r\n    generateLink, options, setOption,\r\n    useCurrentData, useOption,\r\n} from \"../../logic/hosting\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport QuarterPageHeader from \"../components/quarter-page-header\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport ButtonBox from \"../components/button-box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport LinkedButton from \"../components/linked-button\";\r\nimport LabelWithControl from \"../components/label-with-control\";\r\nimport Caption from \"../components/caption\";\r\nimport Placeholder from \"../components/placeholder\";\r\n\r\nconst GameOptionsPage = () => {\r\n    useTitle(\"Spiel hosten | SightMe\");\r\n\r\n    const enableTendency = useOption(options.TENDENCY);\r\n    const enableDynamicDistance = useOption(options.DYNAMIC_DISTANCE);\r\n    const enableNoDistance = useOption(options.NO_DISTANCE);\r\n    const enableVBar = useOption(options.USE_VBAR);\r\n\r\n    const currentData = useCurrentData();\r\n\r\n    useEffect(() => {\r\n        if (!currentData.latitude || !currentData.longitude) {\r\n            navigate(\"/host\");\r\n        }\r\n\r\n        if (!currentData.name) {\r\n            navigate(\"/host/enter-name\");\r\n        }\r\n    }, [currentData]);\r\n\r\n    const onSubmit = () => {\r\n        generateLink();\r\n        navigateWithDelay(\"/share\", true);\r\n    };\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <BackBar href={\"enter-name\"}/>\r\n\r\n            <FullHeightContent>\r\n                <QuarterPageHeader noHorizontalPadding>\r\n                    <Typography variant=\"h4\" component=\"h1\">Spieloptionen</Typography>\r\n                </QuarterPageHeader>\r\n\r\n                <LabelWithControl\r\n                    label=\"Richtungs-Tendenz anzeigen\"\r\n                    control={<Switch checked={enableTendency} onChange={event => setOption(options.TENDENCY, event.target.checked)}/>}\r\n                />\r\n                <Caption>Zeige den Teilnehmern an, ob sie auf dich zu oder von dir weg laufen.</Caption>\r\n\r\n                <Placeholder/>\r\n\r\n                <LabelWithControl\r\n                    label=\"Dynamisch Distanz verwenden\"\r\n                    control={<Switch checked={enableDynamicDistance} onChange={event => setOption(options.DYNAMIC_DISTANCE, event.target.checked)}/>}\r\n                />\r\n                <Caption>\r\n                    Wenn eingeschaltet, wird der blinkende Kreis beim Beitreten des Spiels dynamisch berechnet. Sinnvoll zusammen mit\r\n                    \"Distanz ausblenden\", wenn man nicht weit von den Teilnehmern entfernt ist.\r\n                </Caption>\r\n\r\n                <Placeholder/>\r\n\r\n                <LabelWithControl\r\n                    label=\"Distanz ausblenden\"\r\n                    control={<Switch checked={enableNoDistance} onChange={event => setOption(options.NO_DISTANCE, event.target.checked)}/>}\r\n                />\r\n                <Caption>Den Teilnehmern nicht die Distanz zu dir anzeigen.</Caption>\r\n\r\n                <Placeholder/>\r\n\r\n                <LabelWithControl\r\n                    label=\"Vertikalen Balken verwenden\"\r\n                    control={<Switch checked={enableVBar} onChange={event => setOption(options.USE_VBAR, event.target.checked)}/>}\r\n                />\r\n                <Caption>Statt des blinkenden Kreises einen vertikale, sich füllenden Balken verwenden.</Caption>\r\n            </FullHeightContent>\r\n\r\n            <ButtonBox>\r\n                <Button onClick={onSubmit}>Weiter</Button>\r\n                <LinkedButton variant=\"text\" color=\"inherit\" href={\"enter-name\"}>Zurück</LinkedButton>\r\n            </ButtonBox>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default GameOptionsPage;","import React from \"react\";\r\nimport BackBar from \"../components/back-bar\";\r\nimport ActiveGameWrapper from \"../components/active-game-wrapper\";\r\nimport QuarterPageHeader from \"../components/quarter-page-header\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Centering from \"../components/centering\";\r\nimport Caption from \"../components/caption\";\r\nimport MapContainer from \"../components/map-container\";\r\nimport useGeolocation from \"../../logic/use-geolocation\";\r\nimport FullHeightWrapper from \"../components/full-height-wrapper\";\r\nimport FullHeightContent from \"../components/full-height-content\";\r\nimport Placeholder from \"../components/placeholder\";\r\nimport ButtonBox from \"../components/button-box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport LinkedButton from \"../components/linked-button\";\r\nimport useDistance from \"../../logic/use-distance\";\r\nimport { setInitialDistance } from \"../../logic/active-game\";\r\nimport { navigateWithDelay } from \"../../logic/with-delay\";\r\n\r\nconst ConfirmPositionPage = ({gameBase64}) => {\r\n    const location = useGeolocation();\r\n    const {distance} = useDistance();\r\n\r\n    const handleClick = () => {\r\n        setInitialDistance(distance);\r\n        navigateWithDelay(\"/play\");\r\n    };\r\n\r\n    return (\r\n        <FullHeightWrapper>\r\n            <BackBar href={`/join/${gameBase64}`}/>\r\n            <ActiveGameWrapper>\r\n                <FullHeightContent>\r\n                    <QuarterPageHeader>\r\n                        <Typography variant=\"h4\" component=\"h1\">Bitte bestätige deine Position.</Typography>\r\n                    </QuarterPageHeader>\r\n\r\n                    <Centering>\r\n                        <Caption>\r\n                            Der Host hat festgelegt, dass dieses Spiel mit dynamischer Distanz gespielt wird.\r\n                            Bitte bestätige, dass du wirklich dort bist, wo du auf der Karte angezeigt wirst,\r\n                            damit wir den blinkenden Kreis richtig berechnen können.\r\n                        </Caption>\r\n                    </Centering>\r\n                    <Placeholder/>\r\n\r\n                    <MapContainer location={location}/>\r\n                </FullHeightContent>\r\n\r\n                <ButtonBox>\r\n                    <Button onClick={handleClick}>Position bestätigen</Button>\r\n                    <LinkedButton href={`/join/${gameBase64}`} variant=\"text\" color=\"inherit\">Zurück</LinkedButton>\r\n                </ButtonBox>\r\n            </ActiveGameWrapper>\r\n        </FullHeightWrapper>\r\n    );\r\n};\r\n\r\nexport default ConfirmPositionPage;","import React from 'react';\nimport './App.css';\nimport { useRoutes } from \"hookrouter\";\nimport IndexPage from \"./ui/pages/index-page\";\nimport HostPage from \"./ui/pages/host-page\";\nimport JoinPage from \"./ui/pages/join-page\";\nimport PlayPage from \"./ui/pages/play-page\";\nimport NotFoundPage from \"./ui/pages/not-found-page\";\nimport { createMuiTheme } from \"@material-ui/core\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport green from \"@material-ui/core/colors/green\";\nimport StateSnackbar from \"./ui/components/state-snackbar\";\nimport SharePage from \"./ui/pages/share-page\";\nimport AboutPage from \"./ui/pages/about-page\";\nimport EnterNamePage from \"./ui/pages/enter-name-page\";\nimport GameOptionsPage from \"./ui/pages/game-options-page\";\nimport ConfirmPositionPage from \"./ui/pages/confirm-position-page\";\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: blue,\n        secondary: green,\n    },\n    overrides: {\n        MuiButton: {\n            root: {\n                borderRadius: \"5em\",\n            },\n            label: {\n                paddingLeft: \"1em\",\n                paddingRight: \"1em\",\n                paddingTop: \"0.3em\",\n                paddingBottom: \"0.3em\"\n            }\n        },\n        MuiIconButton: {\n            root: {\n                color: \"#000\"\n            }\n        },\n        MuiOutlinedInput: {\n            root: {\n                borderRadius: \"5em\"\n            },\n            input: {\n                padding: \"16px 24px\"\n            }\n        },\n        MuiDialogActions: {\n            root: {\n                flexDirection: \"column\",\n                \"& > :not(:first-child)\" : {\n                    marginTop: \"6px\"\n                }\n            }\n        },\n        MuiSnackbarContent: {\n            root: {\n                flexWrap: \"nowrap\"\n            }\n        },\n        MuiSwitch: {\n            root: {\n                width: \"48px\"\n            },\n            switchBase: {\n                \"&$checked\": {\n                    transform: \"translateX(10px)\"\n                }\n            }\n        },\n    },\n    props: {\n        MuiButton: {\n            color: \"secondary\",\n            variant: \"contained\"\n        },\n        MuiTextField: {\n            variant: \"outlined\",\n            fullWidth: true,\n        },\n        MuiDialogActions: {\n            disableSpacing: true\n        }\n    }\n});\n\nconst routes = {\n    \"/\": () => <IndexPage/>,\n    \"/host\": () => <HostPage/>,\n    \"/host/enter-name\": () => <EnterNamePage/>,\n    \"/host/game-options\": () => <GameOptionsPage/>,\n    \"/share\": () => <SharePage/>,\n    \"/join/:game\": ({game}) => <JoinPage gameBase64={game}/>,\n    \"/join/:game/confirm-position\": ({game}) => <ConfirmPositionPage gameBase64={game}/>,\n    \"/play\": () => <PlayPage/>,\n    \"/about\": () => <AboutPage/>\n};\n\nconst App = () => {\n    const routeResult = useRoutes(routes);\n\n    return (\n        <ThemeProvider theme={theme}>\n            <StateSnackbar stateName=\"global\" useAlert={false}/>\n            {routeResult || <NotFoundPage/>}\n        </ThemeProvider>\n    );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {setBasepath} from \"hookrouter\";\nimport moment from \"moment\";\nimport {Provider} from \"react-redux\";\nimport { persistor, store } from \"./logic/store\";\nimport { PersistGate } from \"redux-persist/integration/react\";\n\nsetBasepath(process.env.PUBLIC_URL);\n\nmoment().locale(\"de\");\n\nReactDOM.render(\n    <Provider store={store}>\n        <PersistGate loading={null} persistor={persistor}>\n            <App/>\n        </PersistGate>\n    </Provider>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}