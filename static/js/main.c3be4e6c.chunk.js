(this.webpackJsonpsightme=this.webpackJsonpsightme||[]).push([[0],{117:function(e,t,n){e.exports=n(148)},122:function(e,t,n){},123:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),o=n.n(i),l=(n(122),n(123),n(25)),c=n(149),u=function(e){var t=e.standard,n=e.colored,a=e.variant,i=e.component;return r.a.createElement(c.a,{component:i||"div",variant:a||"body1"},r.a.createElement(c.a,{component:"span",variant:a||"body1"},t),r.a.createElement(c.a,{component:"span",color:"secondary",variant:a||"body1"},n))},s=n(198),d=n(184),m=Object(d.a)((function(){return{hugeVerticalPadding:{paddingTop:"25vh",paddingBottom:"15vh",paddingLeft:"1em",paddingRight:"1em",textAlign:"center"},hugeVerticalPaddingNoHorizontal:{paddingTop:"25vh",paddingBottom:"15vh",textAlign:"center"}}})),g=function(e){var t=e.children,n=e.noHorizontalPadding,a=m();return r.a.createElement(s.a,{className:n?a.hugeVerticalPaddingNoHorizontal:a.hugeVerticalPadding},t)},f=function(e){var t=e.children;return r.a.createElement(c.a,{variant:"body2",color:"textSecondary",style:{marginLeft:"2em",marginRight:"2em"}},t)},p=function(e){var t=e.factor,n=2*(void 0===t?1:t);return r.a.createElement("p",{style:{marginTop:n+"em"}})},v=n(185),h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];setTimeout((function(){return l.navigate.apply(void 0,t)}),250)},b=function(e){setTimeout(e,250)},E=function(e){return r.a.createElement(v.a,Object.assign({},e,{onClick:function(t){t.preventDefault(),h(e.href)}}),e.children)},O=function(e){return r.a.createElement(s.a,Object.assign({},e,{style:{textAlign:"center"}}),e.children)},j=n(13),y=n(17),k=n(26),S=n(91),x=n.n(S),w=n(66),N={},C=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||k.c)(),B={key:"active-game",storage:x.a,whitelist:["active-game"]},T=Object(k.d)(Object(w.a)(B,(function(e){return e})),C),A=Object(w.b)(T);T.injectReducer=function(e,t){N[e]=t,T.replaceReducer(Object(w.a)(B,Object(k.b)(N)))};var P,z=function(e){return T.getState()[e]},D=function(e,t){var n=z(e);return T.subscribe((function(){n!==z(e)&&(n=z(e),t(n))}))},L=function(e,t){return"".concat(e,"/").concat(t)},R=n(20),M=n(28),F=n.n(M),I=L("active-game","set-active-game"),V=L("active-game","leave-active-game"),W=(P={},Object(y.a)(P,I,(function(e,t){return Object(R.a)(e,(function(e){return console.log("set-active-game "+t),t}))})),Object(y.a)(P,V,(function(e){return Object(R.a)(e,(function(e){delete e.name,delete e.expiresAt,delete e.lat,delete e.lng}))})),P),H=function(){T.dispatch({type:V,payload:{}})};T.injectReducer("active-game",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return W[n]?W[n](e,a):e}));var _,J=function(){var e=Object(a.useState)(z("active-game")),t=Object(j.a)(e,2),n=t[0],r=t[1];return Object(a.useLayoutEffect)((function(){return D("active-game",r)}),[r]),n&&F()().isAfter(n.expiresAt)&&H(),n},q=function(){var e=J();return r.a.createElement(a.Fragment,null,r.a.createElement(g,null,r.a.createElement(u,{variant:"h2",component:"h1",standard:"Sight",colored:"Me"})),r.a.createElement(O,null,r.a.createElement(E,{href:"/host"},"Spiel erstellen"),r.a.createElement(p,null),e.name&&r.a.createElement(E,{href:"/play"},e.name,"'s Spiel"),!e.name&&r.a.createElement(f,null,"Du nimmst aktuell an keinem aktiven Spiel teil. Du erh\xe4ltst vom Spielleiter einen Link zum Beitreten.")))},G=n(187),K=n(188),U=n(186),X=function(e){return r.a.createElement(U.a,Object.assign({},e,{onClick:function(t){t.preventDefault(),h(e.href)}}),e.children)},Y=n(189),$=Object(d.a)((function(e){return{offsetFromTop:{paddingTop:"3vh"},offset:e.mixins.toolbar}})),Q=function(e){var t=e.href,n=e.onClick,i=$();return t&&(n=void 0),r.a.createElement(a.Fragment,null,r.a.createElement(G.a,{position:"sticky",className:i.offsetFromTop,color:"transparent",elevation:0},r.a.createElement(K.a,null,t&&r.a.createElement(X,{href:t,edge:"start","aria-label":"back"},r.a.createElement(Y.a,null)),n&&r.a.createElement(U.a,{onClick:n,edge:"start","aria-label":"back"},r.a.createElement(Y.a,null)))))},Z=function(e){var t=e.children;return r.a.createElement(s.a,{style:{marginLeft:"16px",marginRight:"16px"}},t)},ee=Object(d.a)((function(){return{titlePadding:{paddingTop:"0.5em",paddingBottom:"3em"}}})),te=function(e){var t=e.standard,n=e.colored,a=ee();return n?r.a.createElement(s.a,{className:a.titlePadding},r.a.createElement(u,{variant:"h6",component:"h1",standard:t,colored:n})):r.a.createElement(s.a,{className:a.titlePadding},r.a.createElement(c.a,{variant:"h6",component:"h1"},t))},ne=n(203),ae=n(204),re=n(190),ie=n(205),oe=function(e){var t,n,i=e.location,o=[null===i||void 0===i||null===(t=i.coords)||void 0===t?void 0:t.latitude,null===i||void 0===i||null===(n=i.coords)||void 0===n?void 0:n.longitude],l=Object(a.useState)(13),u=Object(j.a)(l,2),s=u[0];u[1];return r.a.createElement(a.Fragment,null,i&&r.a.createElement(ne.a,{center:o,zoom:s,style:{height:"30vmax"}},r.a.createElement(ae.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(re.a,{position:o},r.a.createElement(ie.a,null,"Deine Position"))),!i&&r.a.createElement("div",{style:{width:"100%",height:"30vmax"}},r.a.createElement(O,null,r.a.createElement(c.a,{variant:"body2"},"GPS-Position ist unbekannt. Bitte erlaube den Standort f\xfcr diese App"))))},le=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=void 0;return navigator.geolocation&&(e=navigator.geolocation.watchPosition((function(e){r(e)}))),function(){e&&navigator.geolocation.clearWatch(e)}}),[]),n},ce=n(40),ue=L("dialogs","show"),se=L("dialogs","hide"),de=L("dialogs","setInfo"),me=(_={},Object(y.a)(_,ue,(function(e,t){return Object(R.a)(e,(function(n){n[t]=Object(ce.a)(Object(ce.a)({},e[t]),{},{show:!0})}))})),Object(y.a)(_,se,(function(e,t){return Object(R.a)(e,(function(n){n[t]=Object(ce.a)(Object(ce.a)({},e[t]),{},{show:!1})}))})),Object(y.a)(_,de,(function(e,t){var n=t.dialogName,a=t.info;return Object(R.a)(e,(function(t){var r;t[n]=Object(ce.a)(Object(ce.a)({},a),{},{show:null===(r=e[n])||void 0===r?void 0:r.show})}))})),_),ge=function(e){return T.dispatch({type:ue,payload:e})},fe=function(e){var t;(null===(t=z("dialogs")[e])||void 0===t?void 0:t.show)&&T.dispatch({type:se,payload:e})};T.injectReducer("dialogs",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return me[n]?me[n](e,a):e}));var pe,ve=function(e){var t=Object(a.useState)(z("dialogs")),n=Object(j.a)(t,2),r=n[0],i=n[1];return Object(a.useLayoutEffect)((function(){return D("dialogs",i)}),[i]),r[e]},he=n(201),be=n(192),Ee=n(193),Oe=Object(d.a)((function(){return{hugeVerticalPadding:{paddingTop:"10vh",paddingBottom:"5vh",paddingLeft:"1em",paddingRight:"1em",textAlign:"center"},hugeVerticalPaddingNoHorizontal:{paddingTop:"10vh",paddingBottom:"5vh",textAlign:"center"}}})),je=function(e){var t=e.children,n=e.noHorizontalPadding,a=Oe();return r.a.createElement(s.a,{className:n?a.hugeVerticalPaddingNoHorizontal:a.hugeVerticalPadding},t)},ye=n(197),ke=function(e,t){var n=Object(a.useState)(""),i=Object(j.a)(n,2),o=i[0],l=i[1],c=Object(a.useState)(""),u=Object(j.a)(c,2),s=u[0],d=u[1];return{validate:function(){return 0===o.length&&d("Eingabe darf nicht leer sein!"),o.length>0&&o.length<=t},text:o,component:r.a.createElement(ye.a,Object.assign({},e,{value:o,error:s.length>0,helperText:s,onChange:function(e){var n=e.target.value;n.length>t?d("Eingabe ist zu lang!"):d(""),l(n)}}))}},Se=n(65),xe=L("hosting","generate-link"),we=L("hosting","set-username"),Ne=L("hosting","set-create-date"),Ce=L("hosting","set-lat-lng"),Be=(pe={},Object(y.a)(pe,xe,(function(e){return Object(R.a)(e,(function(t){var n={name:e.name,expiresAt:e.expiresAt,lat:e.latitude,lng:e.longitude},a=Se.Base64.encodeURI(JSON.stringify(n));t.link=window.origin+"/sightme/join/"+a}))})),Object(y.a)(pe,we,(function(e,t){return Object(R.a)(e,(function(e){e.name=t}))})),Object(y.a)(pe,Ne,(function(e,t){return Object(R.a)(e,(function(e){e.expiresAt=t}))})),Object(y.a)(pe,Ce,(function(e,t){var n=t.lat,a=t.lng;return Object(R.a)(e,(function(e){e.latitude=n,e.longitude=a}))})),pe);T.injectReducer("hosting",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return Be[n]?Be[n](e,a):e}));var Te,Ae=function(e){var t=e.onSubmit,n=e.onClose,a=ve("enter-name-dialog"),i=ke({placeholder:"Dein Name"},20),o=i.validate,l=i.text,u=i.component;return r.a.createElement(he.a,{fullScreen:!0,open:(null===a||void 0===a?void 0:a.show)||!1,onClose:n},r.a.createElement(Q,{onClick:n}),r.a.createElement(be.a,null,r.a.createElement(je,{noHorizontalPadding:!0},r.a.createElement(c.a,{variant:"h4",component:"h1"},"Bitte gib deinen Namen ein.")),r.a.createElement(O,null,r.a.createElement(f,null,"Damit wissen die Teilnehmer, dass sie wirklich deinem Spiel beitreten."),r.a.createElement(p,null),u)),r.a.createElement(Ee.a,null,r.a.createElement(v.a,{onClick:function(){var e;o()&&(e=l,T.dispatch({type:we,payload:e}),t())}},"Spiel erstellen"),r.a.createElement(v.a,{variant:"text",color:"inherit",onClick:n},"Abbrechen")))},Pe=n(194),ze=function(e){return r.a.createElement(Pe.a,Object.assign({},e,{onClick:function(t){t.preventDefault(),h(e.href)}}))},De=n(195),Le=Object(d.a)((function(){return{titlePadding:{paddingTop:"0.5em",paddingBottom:"0.5em"}}})),Re=function(e){var t=e.standard,n=e.colored,a=Le();return n?r.a.createElement(s.a,{className:a.titlePadding},r.a.createElement(u,{variant:"subtitle2",component:"h1",standard:t,colored:n})):r.a.createElement(s.a,{className:a.titlePadding},r.a.createElement(c.a,{variant:"subtitle2",component:"h1"},t))},Me=L("message","set"),Fe=L("message","clear"),Ie=(Te={},Object(y.a)(Te,Me,(function(e,t){var n=t.message,a=t.scope;return Object(R.a)(e,(function(e){e[a]=n}))})),Object(y.a)(Te,Fe,(function(e,t){return Object(R.a)(e,(function(e){e[t]=null}))})),Te),Ve={global:null},We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";return T.dispatch({type:Me,payload:{message:e,scope:t}})};T.injectReducer("message",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return Ie[n]?Ie[n](e,a):e}));var He=Object(d.a)((function(){return{container:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"flex-start"},link:{overflowWrap:"anywhere",flexGrow:1},shareIconBox:{margin:"0px 16px"}}})),_e=function(){var e=He(),t=le(),n=function(){var e=Object(a.useState)(z("hosting")),t=Object(j.a)(e,2),n=t[0],r=t[1];return Object(a.useLayoutEffect)((function(){return D("hosting",r)}),[r]),n.link}(),i=function(){return b((function(){return fe("enter-name-dialog")}))};return r.a.createElement(a.Fragment,null,r.a.createElement(Q,{href:"/"}),r.a.createElement(Z,null,r.a.createElement(te,{standard:"Ein Spiel hosten"}),r.a.createElement(Re,{standard:"Karte"}),r.a.createElement(oe,{location:t}),r.a.createElement(p,null),n&&r.a.createElement(a.Fragment,null,r.a.createElement(Re,{standard:"Link zum Teilen"}),r.a.createElement(s.a,{className:e.container},r.a.createElement(ze,{href:n,color:"inherit",className:e.link},n),r.a.createElement(s.a,{className:e.shareIconBox},r.a.createElement(U.a,{onClick:function(){navigator.share?navigator.share({url:n}):We("Dein Browser unterst\xfctzt das Teilen von Links nicht. Bitte kopiere den Link und verschicke ihn manuell.")}},r.a.createElement(De.a,null)))),r.a.createElement(p,null)),r.a.createElement(O,null,r.a.createElement(v.a,{disabled:!t,onClick:function(){var e,n,a;e=t.coords.latitude,n=t.coords.longitude,T.dispatch({type:Ce,payload:{lat:e,lng:n}}),a=F()().add(1,"days").utc().format(),T.dispatch({type:Ne,payload:a}),b((function(){return ge("enter-name-dialog")}))}},n?"Neues ":"","Spiel erstellen"),!t&&r.a.createElement(a.Fragment,null,r.a.createElement(p,null),r.a.createElement(f,null,"Bitte erlaube den Standort f\xfcr diese App")))),r.a.createElement(Ae,{onSubmit:function(){i(),T.dispatch({type:xe,payload:{}}),We("Das Spiel wurde erstellen! Du kannst den Link zum Spiel jetzt teilen oder noch ein neues Spiel erstellen.")},onClose:i}))},Je=Object(d.a)((function(){return{container:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",position:"absolute",bottom:0,width:"100%",marginBottom:"8px"}}})),qe=function(e){var t=e.gameBase64,n=Je(),i=JSON.parse(Se.Base64.decode(t)),o=F()(null===i||void 0===i?void 0:i.expiresAt).diff(F()(),"hours");return r.a.createElement(a.Fragment,null,r.a.createElement(Q,{href:"/"}),r.a.createElement(Z,null,r.a.createElement(te,{standard:"Einem Spiel beitreten"}),r.a.createElement(p,{factor:2}),r.a.createElement(O,null,i&&r.a.createElement(a.Fragment,null,r.a.createElement(c.a,{variant:"h4"},"Host: ",null===i||void 0===i?void 0:i.name),r.a.createElement("br",null),o>=0&&r.a.createElement(c.a,{variant:"body1"},"g\xfcltig f\xfcr die n\xe4chsten ",o," Stunde(n)"),o<0&&r.a.createElement(c.a,{variant:"body1"},"Das Spiel ist bereit abgelaufen, du kannst ihm nicht mehr beitreten.")),!i&&r.a.createElement(c.a,{variant:"h5"},"Im Link befindet sich kein g\xfcltiges Spiel. Bitte deinen Spielleiter, dir den Link noch einmal zu schicken."))),r.a.createElement(s.a,{className:n.container},r.a.createElement(v.a,{onClick:function(){!function(e){T.dispatch({type:I,payload:e})}(i),h("/play")}},"Spiel beitreten"),r.a.createElement(E,{href:"/",variant:"text",color:"inherit",style:{marginTop:"6px"}},"Abbrechen")))},Ge=function(e){var t=e.open,n=e.text,a=e.onYes,i=e.onNo;return r.a.createElement(he.a,{open:t,onClose:i},r.a.createElement(be.a,null,r.a.createElement(O,null,r.a.createElement(c.a,{variant:"body1"},n))),r.a.createElement(Ee.a,{style:{flexDirection:"row",justifyContent:"center"}},r.a.createElement(v.a,{variant:"text",color:"inherit",onClick:i},"Nein"),r.a.createElement(v.a,{onClick:a},"Ja")))},Ke=n(94),Ue=n.n(Ke),Xe=function(){var e=le(),t=J();if(e&&t){var n=Ue()({latitude:e.coords.latitude,longitude:e.coords.longitude},{latitude:t.lat,longitude:t.lng},1);return{distance:n,frequency:5*Math.pow(Math.E,-.001168*n)}}return{distance:-1,frequency:-1}},Ye=Object(d.a)((function(){return{buttonWrapper:{position:"fixed",bottom:0,width:"100%",marginBottom:"24px"},oneToOneContainer:{width:"100%",paddingTop:"100%",position:"relative"},oneToOneItem:{position:"absolute",top:0,left:0,bottom:0,right:0}}})),$e=function(){var e=J(),t=Xe(),n=t.distance,i=t.frequency,o=Ye(),u=ve("confirm-leave-dialog"),d=Object(a.useState)(!0),m=Object(j.a)(d,2),g=m[0],f=m[1],h=Object(a.useState)(.8),E=Object(j.a)(h,2),y=E[0],k=E[1];e.name||(Object(l.navigate)("/"),We("Kein aktives Spiel gefunden!"));Object(a.useLayoutEffect)((function(){return function(){fe("confirm-leave-dialog")}}),[]);var S=n<500?"< 500 m":"~ "+.5*Math.round(.002*n)+" km";return r.a.createElement(a.Fragment,null,r.a.createElement(Q,{href:"/"}),r.a.createElement(Z,null,r.a.createElement(te,{standard:"Finde ",colored:e.name}),r.a.createElement(p,null),r.a.createElement(O,null,r.a.createElement(s.a,{className:o.oneToOneContainer},r.a.createElement(s.a,{style:{position:"absolute",top:0,left:0,bottom:0,right:0,animation:g?"ripple ".concat(1/y,"s ease-out infinite"):"none"},className:"ripple",onAnimationIteration:function(){y!==i&&(k(i),f(!1),setTimeout((function(){f(!0)}),10))}})),r.a.createElement(p,null),r.a.createElement(c.a,{variant:"body1"},"Distanz ",S))),r.a.createElement(p,{factor:3}),r.a.createElement(O,{className:o.buttonWrapper},r.a.createElement(v.a,{onClick:function(){return b((function(){return ge("confirm-leave-dialog")}))}},"Spiel verlassen")),r.a.createElement(Ge,{open:(null===u||void 0===u?void 0:u.show)||!1,title:"Spiel verlassen",text:"M\xf6chtest du das Spiel wirklich verlassen?",onNo:function(){return fe("confirm-leave-dialog")},onYes:function(){H(),Object(l.navigate)("/")}}))},Qe=function(){return r.a.createElement(c.a,{variant:"body1"},"Seite nicht gefunden :/")},Ze=n(100),et=n(96),tt=n.n(et),nt=n(196),at=n(97),rt=n.n(at),it=n(202),ot=n(95),lt=n.n(ot),ct=n(200);function ut(e){return r.a.createElement(ct.a,Object.assign({elevation:6,variant:"filled"},e))}var st=function(e){var t=e.stateName,n=e.useAlert,i=void 0===n||n,o=e.severity,l=void 0===o?"error":o,c=e.actionName,u=void 0===c?"R\xfcckg\xe4ngig":c,s=e.action,d=void 0===s?null:s,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global",t=Object(a.useState)(z("message")),n=Object(j.a)(t,2),r=n[0],i=n[1];return Object(a.useLayoutEffect)((function(){return D("message",i)}),[i]),r[e]}(t),g=m,f=!!m,p=Object(a.useState)(""),h=Object(j.a)(p,2),b=h[0],E=h[1],O=function(e,n){"clickaway"!==n&&f&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";T.dispatch({type:Fe,payload:e})}(t)},y=null;return i&&(y=r.a.createElement(ut,{severity:l,onClose:O},b)),Object(a.useLayoutEffect)((function(){g&&E(g)}),[g]),r.a.createElement(it.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:f,message:!i&&b,onClose:O,action:!i&&r.a.createElement(r.a.Fragment,null,d&&r.a.createElement(v.a,{color:"secondary",size:"small",onClick:d},u),r.a.createElement(U.a,{size:"small","aria-label":"close",color:"inherit",onClick:O},r.a.createElement(lt.a,{fontSize:"small"})))},y)},dt=Object(Ze.a)({palette:{primary:tt.a,secondary:rt.a},overrides:{MuiButton:{root:{borderRadius:"5em"},label:{paddingLeft:"1em",paddingRight:"1em",paddingTop:"0.3em",paddingBottom:"0.3em"}},MuiIconButton:{root:{color:"#000"}},MuiOutlinedInput:{root:{borderRadius:"5em"},input:{padding:"16px 24px"}},MuiDialogActions:{root:{flexDirection:"column","& > :not(:first-child)":{marginTop:"6px"}}},MuiSnackbarContent:{root:{flexWrap:"nowrap"}}},props:{MuiButton:{color:"secondary",variant:"contained"},MuiTextField:{variant:"outlined",fullWidth:!0},MuiDialogActions:{disableSpacing:!0}}}),mt={"/":function(){return r.a.createElement(q,null)},"/host":function(){return r.a.createElement(_e,null)},"/join/:game":function(e){var t=e.game;return r.a.createElement(qe,{gameBase64:t})},"/play":function(){return r.a.createElement($e,null)}},gt=function(){var e=Object(l.useRoutes)(mt);return r.a.createElement(nt.a,{theme:dt},r.a.createElement(st,{stateName:"global",useAlert:!1}),e||r.a.createElement(Qe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ft=n(99),pt=n(98);Object(l.setBasepath)("/sightme"),F()().locale("de"),o.a.render(r.a.createElement(ft.a,{store:T},r.a.createElement(pt.a,{loading:null,persistor:A},r.a.createElement(gt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[117,1,2]]]);
//# sourceMappingURL=main.c3be4e6c.chunk.js.map